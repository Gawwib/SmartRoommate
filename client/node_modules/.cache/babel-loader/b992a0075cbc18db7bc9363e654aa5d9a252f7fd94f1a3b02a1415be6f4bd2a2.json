{"ast":null,"code":"import React,{createContext,useContext,useEffect,useMemo,useRef,useState,useCallback}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const STORAGE_KEY='appMode';const RoleContext=/*#__PURE__*/createContext({mode:'tenant',isHost:false,isTransitioning:false,pendingMode:null,toggleMode:()=>{},switchToTenant:()=>{}});export function RoleProvider(_ref){let{children}=_ref;const transitionDuration=600;const[mode,setMode]=useState(()=>{try{return localStorage.getItem(STORAGE_KEY)||'tenant';}catch(_unused){return'tenant';}});const[isTransitioning,setIsTransitioning]=useState(false);const[pendingMode,setPendingMode]=useState(null);const timerRef=useRef(null);useEffect(()=>{try{localStorage.setItem(STORAGE_KEY,mode);}catch(_unused2){/* ignore write errors caused by disabled storage */}},[mode]);useEffect(()=>()=>{if(timerRef.current)clearTimeout(timerRef.current);},[]);const startModeTransition=useCallback(nextMode=>{if(mode===nextMode||isTransitioning)return;if(timerRef.current)clearTimeout(timerRef.current);setPendingMode(nextMode);setIsTransitioning(true);timerRef.current=setTimeout(()=>{setMode(nextMode);setIsTransitioning(false);setPendingMode(null);timerRef.current=null;},transitionDuration);},[mode,isTransitioning,transitionDuration]);const toggleMode=useCallback(()=>{const nextMode=mode==='host'?'tenant':'host';startModeTransition(nextMode);},[mode,startModeTransition]);const switchToTenant=useCallback(()=>{if(timerRef.current){clearTimeout(timerRef.current);timerRef.current=null;}setPendingMode(null);setIsTransitioning(false);setMode('tenant');},[]);const value=useMemo(()=>({mode,isHost:mode==='host',isTransitioning,pendingMode,toggleMode,switchToTenant}),[mode,isTransitioning,pendingMode,toggleMode,switchToTenant]);return/*#__PURE__*/_jsx(RoleContext.Provider,{value:value,children:children});}export function useRole(){return useContext(RoleContext);}","map":{"version":3,"names":["React","createContext","useContext","useEffect","useMemo","useRef","useState","useCallback","jsx","_jsx","STORAGE_KEY","RoleContext","mode","isHost","isTransitioning","pendingMode","toggleMode","switchToTenant","RoleProvider","_ref","children","transitionDuration","setMode","localStorage","getItem","_unused","setIsTransitioning","setPendingMode","timerRef","setItem","_unused2","current","clearTimeout","startModeTransition","nextMode","setTimeout","value","Provider","useRole"],"sources":["C:/Users/User/Documents/Project/Smart-roommate-app/client/src/context/RoleContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useMemo, useRef, useState, useCallback } from 'react';\n\nconst STORAGE_KEY = 'appMode';\nconst RoleContext = createContext({\n  mode: 'tenant',\n  isHost: false,\n  isTransitioning: false,\n  pendingMode: null,\n  toggleMode: () => {},\n  switchToTenant: () => {}\n});\n\nexport function RoleProvider({ children }) {\n  const transitionDuration = 600;\n  const [mode, setMode] = useState(() => {\n    try {\n      return localStorage.getItem(STORAGE_KEY) || 'tenant';\n    } catch {\n      return 'tenant';\n    }\n  });\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [pendingMode, setPendingMode] = useState(null);\n  const timerRef = useRef(null);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem(STORAGE_KEY, mode);\n    } catch {\n      /* ignore write errors caused by disabled storage */\n    }\n  }, [mode]);\n\n  useEffect(\n    () => () => {\n      if (timerRef.current) clearTimeout(timerRef.current);\n    },\n    []\n  );\n\n  const startModeTransition = useCallback(\n    (nextMode) => {\n      if (mode === nextMode || isTransitioning) return;\n      if (timerRef.current) clearTimeout(timerRef.current);\n      setPendingMode(nextMode);\n      setIsTransitioning(true);\n      timerRef.current = setTimeout(() => {\n        setMode(nextMode);\n        setIsTransitioning(false);\n        setPendingMode(null);\n        timerRef.current = null;\n      }, transitionDuration);\n    },\n    [mode, isTransitioning, transitionDuration]\n  );\n\n  const toggleMode = useCallback(() => {\n    const nextMode = mode === 'host' ? 'tenant' : 'host';\n    startModeTransition(nextMode);\n  }, [mode, startModeTransition]);\n\n  const switchToTenant = useCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = null;\n    }\n    setPendingMode(null);\n    setIsTransitioning(false);\n    setMode('tenant');\n  }, []);\n\n  const value = useMemo(\n    () => ({\n      mode,\n      isHost: mode === 'host',\n      isTransitioning,\n      pendingMode,\n      toggleMode,\n      switchToTenant\n    }),\n    [mode, isTransitioning, pendingMode, toggleMode, switchToTenant]\n  );\n\n  return <RoleContext.Provider value={value}>{children}</RoleContext.Provider>;\n}\n\nexport function useRole() {\n  return useContext(RoleContext);\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,OAAO,CAAEC,MAAM,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5G,KAAM,CAAAC,WAAW,CAAG,SAAS,CAC7B,KAAM,CAAAC,WAAW,cAAGV,aAAa,CAAC,CAChCW,IAAI,CAAE,QAAQ,CACdC,MAAM,CAAE,KAAK,CACbC,eAAe,CAAE,KAAK,CACtBC,WAAW,CAAE,IAAI,CACjBC,UAAU,CAAEA,CAAA,GAAM,CAAC,CAAC,CACpBC,cAAc,CAAEA,CAAA,GAAM,CAAC,CACzB,CAAC,CAAC,CAEF,MAAO,SAAS,CAAAC,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAAAE,kBAAkB,CAAG,GAAG,CAC9B,KAAM,CAACT,IAAI,CAAEU,OAAO,CAAC,CAAGhB,QAAQ,CAAC,IAAM,CACrC,GAAI,CACF,MAAO,CAAAiB,YAAY,CAACC,OAAO,CAACd,WAAW,CAAC,EAAI,QAAQ,CACtD,CAAE,MAAAe,OAAA,CAAM,CACN,MAAO,QAAQ,CACjB,CACF,CAAC,CAAC,CACF,KAAM,CAACX,eAAe,CAAEY,kBAAkB,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACS,WAAW,CAAEY,cAAc,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAAAsB,QAAQ,CAAGvB,MAAM,CAAC,IAAI,CAAC,CAE7BF,SAAS,CAAC,IAAM,CACd,GAAI,CACFoB,YAAY,CAACM,OAAO,CAACnB,WAAW,CAAEE,IAAI,CAAC,CACzC,CAAE,MAAAkB,QAAA,CAAM,CACN,qDAEJ,CAAC,CAAE,CAAClB,IAAI,CAAC,CAAC,CAEVT,SAAS,CACP,IAAM,IAAM,CACV,GAAIyB,QAAQ,CAACG,OAAO,CAAEC,YAAY,CAACJ,QAAQ,CAACG,OAAO,CAAC,CACtD,CAAC,CACD,EACF,CAAC,CAED,KAAM,CAAAE,mBAAmB,CAAG1B,WAAW,CACpC2B,QAAQ,EAAK,CACZ,GAAItB,IAAI,GAAKsB,QAAQ,EAAIpB,eAAe,CAAE,OAC1C,GAAIc,QAAQ,CAACG,OAAO,CAAEC,YAAY,CAACJ,QAAQ,CAACG,OAAO,CAAC,CACpDJ,cAAc,CAACO,QAAQ,CAAC,CACxBR,kBAAkB,CAAC,IAAI,CAAC,CACxBE,QAAQ,CAACG,OAAO,CAAGI,UAAU,CAAC,IAAM,CAClCb,OAAO,CAACY,QAAQ,CAAC,CACjBR,kBAAkB,CAAC,KAAK,CAAC,CACzBC,cAAc,CAAC,IAAI,CAAC,CACpBC,QAAQ,CAACG,OAAO,CAAG,IAAI,CACzB,CAAC,CAAEV,kBAAkB,CAAC,CACxB,CAAC,CACD,CAACT,IAAI,CAAEE,eAAe,CAAEO,kBAAkB,CAC5C,CAAC,CAED,KAAM,CAAAL,UAAU,CAAGT,WAAW,CAAC,IAAM,CACnC,KAAM,CAAA2B,QAAQ,CAAGtB,IAAI,GAAK,MAAM,CAAG,QAAQ,CAAG,MAAM,CACpDqB,mBAAmB,CAACC,QAAQ,CAAC,CAC/B,CAAC,CAAE,CAACtB,IAAI,CAAEqB,mBAAmB,CAAC,CAAC,CAE/B,KAAM,CAAAhB,cAAc,CAAGV,WAAW,CAAC,IAAM,CACvC,GAAIqB,QAAQ,CAACG,OAAO,CAAE,CACpBC,YAAY,CAACJ,QAAQ,CAACG,OAAO,CAAC,CAC9BH,QAAQ,CAACG,OAAO,CAAG,IAAI,CACzB,CACAJ,cAAc,CAAC,IAAI,CAAC,CACpBD,kBAAkB,CAAC,KAAK,CAAC,CACzBJ,OAAO,CAAC,QAAQ,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAc,KAAK,CAAGhC,OAAO,CACnB,KAAO,CACLQ,IAAI,CACJC,MAAM,CAAED,IAAI,GAAK,MAAM,CACvBE,eAAe,CACfC,WAAW,CACXC,UAAU,CACVC,cACF,CAAC,CAAC,CACF,CAACL,IAAI,CAAEE,eAAe,CAAEC,WAAW,CAAEC,UAAU,CAAEC,cAAc,CACjE,CAAC,CAED,mBAAOR,IAAA,CAACE,WAAW,CAAC0B,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAhB,QAAA,CAAEA,QAAQ,CAAuB,CAAC,CAC9E,CAEA,MAAO,SAAS,CAAAkB,OAAOA,CAAA,CAAG,CACxB,MAAO,CAAApC,UAAU,CAACS,WAAW,CAAC,CAChC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}