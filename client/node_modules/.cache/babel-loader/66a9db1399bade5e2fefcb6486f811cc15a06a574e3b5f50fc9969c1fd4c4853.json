{"ast":null,"code":"import React,{createContext,useContext,useEffect,useMemo,useRef,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const STORAGE_KEY='appMode';const RoleContext=/*#__PURE__*/createContext({mode:'tenant',isHost:false,isTransitioning:false,pendingMode:null,toggleMode:()=>{},switchToTenant:()=>{}});export function RoleProvider(_ref){let{children}=_ref;const transitionDuration=600;const[mode,setMode]=useState(()=>{try{return localStorage.getItem(STORAGE_KEY)||'tenant';}catch(_unused){return'tenant';}});const[isTransitioning,setIsTransitioning]=useState(false);const[pendingMode,setPendingMode]=useState(null);const timerRef=useRef(null);useEffect(()=>{try{localStorage.setItem(STORAGE_KEY,mode);}catch(_unused2){/* ignore write errors caused by disabled storage */}},[mode]);useEffect(()=>()=>clearTimeout(timerRef.current),[]);const startModeTransition=nextMode=>{if(mode===nextMode||isTransitioning)return;if(timerRef.current)clearTimeout(timerRef.current);setPendingMode(nextMode);setIsTransitioning(true);timerRef.current=setTimeout(()=>{setMode(nextMode);setIsTransitioning(false);setPendingMode(null);timerRef.current=null;},transitionDuration);};const toggleMode=()=>{const nextMode=mode==='host'?'tenant':'host';startModeTransition(nextMode);};const switchToTenant=()=>{if(timerRef.current){clearTimeout(timerRef.current);timerRef.current=null;}setPendingMode(null);setIsTransitioning(false);setMode('tenant');};const value=useMemo(()=>({mode,isHost:mode==='host',isTransitioning,pendingMode,toggleMode,switchToTenant}),[mode,isTransitioning,pendingMode]);return/*#__PURE__*/_jsx(RoleContext.Provider,{value:value,children:children});}export function useRole(){return useContext(RoleContext);}","map":{"version":3,"names":["React","createContext","useContext","useEffect","useMemo","useRef","useState","jsx","_jsx","STORAGE_KEY","RoleContext","mode","isHost","isTransitioning","pendingMode","toggleMode","switchToTenant","RoleProvider","_ref","children","transitionDuration","setMode","localStorage","getItem","_unused","setIsTransitioning","setPendingMode","timerRef","setItem","_unused2","clearTimeout","current","startModeTransition","nextMode","setTimeout","value","Provider","useRole"],"sources":["C:/Users/User/Documents/Project/Smart-roommate-app/client/src/context/RoleContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useMemo, useRef, useState } from 'react';\n\nconst STORAGE_KEY = 'appMode';\nconst RoleContext = createContext({\n  mode: 'tenant',\n  isHost: false,\n  isTransitioning: false,\n  pendingMode: null,\n  toggleMode: () => {},\n  switchToTenant: () => {}\n});\n\nexport function RoleProvider({ children }) {\n  const transitionDuration = 600;\n  const [mode, setMode] = useState(() => {\n    try {\n      return localStorage.getItem(STORAGE_KEY) || 'tenant';\n    } catch {\n      return 'tenant';\n    }\n  });\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [pendingMode, setPendingMode] = useState(null);\n  const timerRef = useRef(null);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem(STORAGE_KEY, mode);\n    } catch {\n      /* ignore write errors caused by disabled storage */\n    }\n  }, [mode]);\n\n  useEffect(() => () => clearTimeout(timerRef.current), []);\n\n  const startModeTransition = (nextMode) => {\n    if (mode === nextMode || isTransitioning) return;\n    if (timerRef.current) clearTimeout(timerRef.current);\n    setPendingMode(nextMode);\n    setIsTransitioning(true);\n    timerRef.current = setTimeout(() => {\n      setMode(nextMode);\n      setIsTransitioning(false);\n      setPendingMode(null);\n      timerRef.current = null;\n    }, transitionDuration);\n  };\n\n  const toggleMode = () => {\n    const nextMode = mode === 'host' ? 'tenant' : 'host';\n    startModeTransition(nextMode);\n  };\n\n  const switchToTenant = () => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = null;\n    }\n    setPendingMode(null);\n    setIsTransitioning(false);\n    setMode('tenant');\n  };\n\n  const value = useMemo(\n    () => ({\n      mode,\n      isHost: mode === 'host',\n      isTransitioning,\n      pendingMode,\n      toggleMode,\n      switchToTenant\n    }),\n    [mode, isTransitioning, pendingMode]\n  );\n\n  return <RoleContext.Provider value={value}>{children}</RoleContext.Provider>;\n}\n\nexport function useRole() {\n  return useContext(RoleContext);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}