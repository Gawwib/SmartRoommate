{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\Project\\\\Smart-roommate-app\\\\client\\\\src\\\\context\\\\RoleContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useMemo, useRef, useState, useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STORAGE_KEY = 'appMode';\nconst RoleContext = /*#__PURE__*/createContext({\n  mode: 'tenant',\n  isHost: false,\n  isTransitioning: false,\n  pendingMode: null,\n  toggleMode: () => {},\n  switchToTenant: () => {}\n});\nexport function RoleProvider({\n  children\n}) {\n  _s();\n  const transitionDuration = 600;\n  const [mode, setMode] = useState(() => {\n    try {\n      return localStorage.getItem(STORAGE_KEY) || 'tenant';\n    } catch {\n      return 'tenant';\n    }\n  });\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [pendingMode, setPendingMode] = useState(null);\n  const timerRef = useRef(null);\n  useEffect(() => {\n    try {\n      localStorage.setItem(STORAGE_KEY, mode);\n    } catch {\n      /* ignore write errors caused by disabled storage */\n    }\n  }, [mode]);\n  useEffect(() => () => {\n    if (timerRef.current) clearTimeout(timerRef.current);\n  }, []);\n  const startModeTransition = useCallback(nextMode => {\n    if (mode === nextMode || isTransitioning) return;\n    if (timerRef.current) clearTimeout(timerRef.current);\n    setPendingMode(nextMode);\n    setIsTransitioning(true);\n    timerRef.current = setTimeout(() => {\n      setMode(nextMode);\n      setIsTransitioning(false);\n      setPendingMode(null);\n      timerRef.current = null;\n    }, transitionDuration);\n  }, [mode, isTransitioning, transitionDuration]);\n  const toggleMode = useCallback(() => {\n    const nextMode = mode === 'host' ? 'tenant' : 'host';\n    startModeTransition(nextMode);\n  }, [mode, startModeTransition]);\n  const switchToTenant = useCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = null;\n    }\n    setPendingMode(null);\n    setIsTransitioning(false);\n    setMode('tenant');\n  }, []);\n  const value = useMemo(() => ({\n    mode,\n    isHost: mode === 'host',\n    isTransitioning,\n    pendingMode,\n    toggleMode,\n    switchToTenant\n  }), [mode, isTransitioning, pendingMode, toggleMode, switchToTenant]);\n  return /*#__PURE__*/_jsxDEV(RoleContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 10\n  }, this);\n}\n_s(RoleProvider, \"OB4bz1qq2/SVnfLbLVbwqCx069g=\");\n_c = RoleProvider;\nexport function useRole() {\n  _s2();\n  return useContext(RoleContext);\n}\n_s2(useRole, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"RoleProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useMemo","useRef","useState","useCallback","jsxDEV","_jsxDEV","STORAGE_KEY","RoleContext","mode","isHost","isTransitioning","pendingMode","toggleMode","switchToTenant","RoleProvider","children","_s","transitionDuration","setMode","localStorage","getItem","setIsTransitioning","setPendingMode","timerRef","setItem","current","clearTimeout","startModeTransition","nextMode","setTimeout","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useRole","_s2","$RefreshReg$"],"sources":["C:/Users/User/Documents/Project/Smart-roommate-app/client/src/context/RoleContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useMemo, useRef, useState, useCallback } from 'react';\n\nconst STORAGE_KEY = 'appMode';\nconst RoleContext = createContext({\n  mode: 'tenant',\n  isHost: false,\n  isTransitioning: false,\n  pendingMode: null,\n  toggleMode: () => {},\n  switchToTenant: () => {}\n});\n\nexport function RoleProvider({ children }) {\n  const transitionDuration = 600;\n  const [mode, setMode] = useState(() => {\n    try {\n      return localStorage.getItem(STORAGE_KEY) || 'tenant';\n    } catch {\n      return 'tenant';\n    }\n  });\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [pendingMode, setPendingMode] = useState(null);\n  const timerRef = useRef(null);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem(STORAGE_KEY, mode);\n    } catch {\n      /* ignore write errors caused by disabled storage */\n    }\n  }, [mode]);\n\n  useEffect(\n    () => () => {\n      if (timerRef.current) clearTimeout(timerRef.current);\n    },\n    []\n  );\n\n  const startModeTransition = useCallback(\n    (nextMode) => {\n      if (mode === nextMode || isTransitioning) return;\n      if (timerRef.current) clearTimeout(timerRef.current);\n      setPendingMode(nextMode);\n      setIsTransitioning(true);\n      timerRef.current = setTimeout(() => {\n        setMode(nextMode);\n        setIsTransitioning(false);\n        setPendingMode(null);\n        timerRef.current = null;\n      }, transitionDuration);\n    },\n    [mode, isTransitioning, transitionDuration]\n  );\n\n  const toggleMode = useCallback(() => {\n    const nextMode = mode === 'host' ? 'tenant' : 'host';\n    startModeTransition(nextMode);\n  }, [mode, startModeTransition]);\n\n  const switchToTenant = useCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = null;\n    }\n    setPendingMode(null);\n    setIsTransitioning(false);\n    setMode('tenant');\n  }, []);\n\n  const value = useMemo(\n    () => ({\n      mode,\n      isHost: mode === 'host',\n      isTransitioning,\n      pendingMode,\n      toggleMode,\n      switchToTenant\n    }),\n    [mode, isTransitioning, pendingMode, toggleMode, switchToTenant]\n  );\n\n  return <RoleContext.Provider value={value}>{children}</RoleContext.Provider>;\n}\n\nexport function useRole() {\n  return useContext(RoleContext);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}