{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\Project\\\\Smart-roommate-app\\\\client\\\\src\\\\components\\\\Properties.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FaBed, FaCoins, FaImages, FaMapMarkerAlt, FaPen, FaTrash, FaRegEye } from 'react-icons/fa';\nimport API from '../services/api';\nimport { useRole } from '../context/RoleContext';\nimport { DEFAULT_PROPERTY_IMAGE } from '../constants/propertyMedia';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst priceFormatter = new Intl.NumberFormat('bs-BA', {\n  style: 'currency',\n  currency: 'BAM',\n  maximumFractionDigits: 0\n});\nconst formatPrice = value => priceFormatter.format(Number(value) || 0);\nexport default function Properties() {\n  _s();\n  const [properties, setProperties] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [currentUser, setCurrentUser] = useState(null);\n  const navigate = useNavigate();\n  const token = localStorage.getItem('token');\n  const isAuthenticated = Boolean(token);\n  const {\n    isHost,\n    isTransitioning,\n    pendingMode\n  } = useRole();\n  const canManageListings = isAuthenticated && isHost;\n  useEffect(() => {\n    const fetchProperties = async () => {\n      try {\n        setLoading(true);\n        const res = await API.get('/properties');\n        setProperties(res.data);\n        setError('');\n      } catch (err) {\n        console.error(err);\n        setError('Unable to load properties right now.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProperties();\n  }, []);\n  useEffect(() => {\n    const loadUser = async () => {\n      if (!token) {\n        setCurrentUser(null);\n        return;\n      }\n      try {\n        const res = await API.get('/users/me');\n        setCurrentUser(res.data);\n      } catch (err) {\n        var _err$response;\n        if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n          setCurrentUser(null);\n        } else {\n          console.error(err);\n        }\n      }\n    };\n    loadUser();\n  }, [token]);\n  const handleDelete = async propertyId => {\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    if (!window.confirm('Delete this property?')) return;\n    try {\n      await API.delete(`/properties/${propertyId}`);\n      setProperties(prev => prev.filter(p => p.id !== propertyId));\n      setError('');\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error(err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Unable to delete property.');\n    }\n  };\n  const ownedByCurrentUser = useCallback(property => currentUser && property.user_id === currentUser.id, [currentUser]);\n  const visibleProperties = useMemo(() => {\n    if (isHost) {\n      if (!currentUser) return [];\n      return properties.filter(property => ownedByCurrentUser(property));\n    }\n    return properties;\n  }, [isHost, currentUser, properties, ownedByCurrentUser]);\n  const highlightCopy = useMemo(() => {\n    if (isHost) {\n      if (!currentUser) return 'Loading your personal listings...';\n      if (!visibleProperties.length) return 'You have not created any properties yet. Start by adding one.';\n      return `You currently manage ${visibleProperties.length} ${visibleProperties.length === 1 ? 'listing' : 'listings'}.`;\n    }\n    return properties.length ? `We found ${properties.length} ${properties.length === 1 ? 'place' : 'places'} across the community.` : 'No spaces have been listed yet — be the first to add yours.';\n  }, [isHost, visibleProperties.length, properties.length, currentUser]);\n  const openDetails = property => {\n    if (isHost) return;\n    navigate(`/properties/${property.id}`, {\n      state: {\n        property\n      }\n    });\n  };\n  const openCreatePage = () => navigate('/properties/new');\n  const openEditPage = property => navigate(`/properties/${property.id}/edit`, {\n    state: {\n      property\n    }\n  });\n  const openPreview = property => navigate(`/properties/${property.id}`, {\n    state: {\n      property\n    }\n  });\n  const heroTitle = isHost ? 'My properties' : 'Beautiful shared homes curated for modern roommates';\n  const heroEyebrow = isHost ? 'Host center' : 'Explore';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"properties-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"properties-hero gradient-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"eyebrow text-uppercase fw-semibold mb-2\",\n          children: heroEyebrow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"properties-title mb-3\",\n          children: heroTitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-4 text-light-emphasis\",\n          children: highlightCopy\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), canManageListings && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-light btn-lg shadow-sm\",\n          onClick: openCreatePage,\n          children: \"List a new space\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"properties-hero-meta\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hero-number\",\n            children: visibleProperties.length || '00'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0 text-light\",\n            children: isHost ? 'your listings' : 'active listings'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hero-number\",\n            children: visibleProperties.filter(p => {\n              var _p$property_type;\n              return ((_p$property_type = p.property_type) === null || _p$property_type === void 0 ? void 0 : _p$property_type.toLowerCase()) === 'apartment';\n            }).length || '0'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0 text-light\",\n            children: isHost ? 'apartment posts' : 'city apartments'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), isAuthenticated && isTransitioning && pendingMode === 'host' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-secondary shadow-sm mt-4\",\n      children: \"Loading host tools for you. This will only take a moment.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger shadow-sm mt-4\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"properties-grid-wrapper mt-4\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card border-0 shadow-sm p-4 text-center\",\n        children: \"Loading properties...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }, this) : visibleProperties.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"property-grid\",\n        children: visibleProperties.map(property => {\n          const galleryImages = Array.isArray(property.gallery_images) ? property.gallery_images.filter(Boolean) : [];\n          const heroImage = property.main_image_url || galleryImages[0] || DEFAULT_PROPERTY_IMAGE;\n          const galleryCount = galleryImages.length || (property.main_image_url ? 1 : 0);\n          return /*#__PURE__*/_jsxDEV(\"article\", {\n            className: `property-card shadow-sm ${isHost ? 'property-card--host' : ''}`,\n            role: !isHost ? 'button' : undefined,\n            tabIndex: !isHost ? 0 : undefined,\n            onClick: () => openDetails(property),\n            onKeyDown: e => {\n              if (!isHost && e.key === 'Enter') openDetails(property);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"property-card__media\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: heroImage,\n                alt: property.title,\n                loading: \"lazy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"property-card__type\",\n                children: property.property_type || 'Listing'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 21\n              }, this), !isHost && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"property-card__overlay\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"View details\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"property-card__body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between align-items-start gap-2 mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    className: \"property-card__title\",\n                    children: property.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"property-card__location\",\n                    children: [/*#__PURE__*/_jsxDEV(FaMapMarkerAlt, {\n                      className: \"me-1 text-primary\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 191,\n                      columnNumber: 27\n                    }, this), property.location]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"property-card__price\",\n                  children: [/*#__PURE__*/_jsxDEV(FaCoins, {\n                    className: \"me-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 25\n                  }, this), formatPrice(property.price), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-muted\",\n                    children: \"/mo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 21\n              }, this), property.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"property-card__description\",\n                children: property.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 46\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"property-card__meta\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [/*#__PURE__*/_jsxDEV(FaBed, {\n                    className: \"me-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 25\n                  }, this), property.rooms ? `${property.rooms} rooms` : 'Flexible rooms']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [/*#__PURE__*/_jsxDEV(FaImages, {\n                    className: \"me-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 25\n                  }, this), galleryCount ? `${galleryCount} photos` : 'No photos']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"property-card__footer\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Hosted by \", property.owner_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 23\n                }, this), ownedByCurrentUser(property) && canManageListings && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"property-card__actions\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-outline-primary btn-sm\",\n                    onClick: event => {\n                      event.stopPropagation();\n                      openEditPage(property);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(FaPen, {\n                      className: \"me-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 29\n                    }, this), \"Edit\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-outline-secondary btn-sm\",\n                    onClick: event => {\n                      event.stopPropagation();\n                      openPreview(property);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(FaRegEye, {\n                      className: \"me-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 29\n                    }, this), \"Preview\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-outline-danger btn-sm\",\n                    onClick: event => {\n                      event.stopPropagation();\n                      handleDelete(property.id);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(FaTrash, {\n                      className: \"me-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 29\n                    }, this), \"Delete\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 19\n            }, this)]\n          }, property.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card border-0 shadow-sm p-4 text-center text-muted\",\n        children: isHost ? 'You have not listed any properties yet. Click “List a new space” to get started.' : 'There are no properties yet. Hosts can be the first to share a beautiful space.'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), previewProperty && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"property-preview-overlay\",\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"property-preview-card card shadow-lg border-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-close ms-auto\",\n          \"aria-label\": \"Close\",\n          onClick: closePreview\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"property-preview-media\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: previewProperty.main_image_url || (Array.isArray(previewProperty.gallery_images) ? previewProperty.gallery_images[0] : '') || DEFAULT_PROPERTY_IMAGE,\n            alt: previewProperty.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"property-preview-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"h4\",\n            children: previewProperty.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted mb-2\",\n            children: previewProperty.location\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"fw-semibold mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(FaCoins, {\n              className: \"me-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this), formatPrice(previewProperty.price), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-muted\",\n              children: \"per month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 54\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this), previewProperty.description ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: previewProperty.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted fst-italic\",\n            children: \"No description provided yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"property-card__meta\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(FaBed, {\n                className: \"me-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 19\n              }, this), previewProperty.rooms ? `${previewProperty.rooms} rooms` : 'Flexible rooms']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(FaImages, {\n                className: \"me-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 19\n              }, this), Array.isArray(previewProperty.gallery_images) && previewProperty.gallery_images.length ? `${previewProperty.gallery_images.length} photos` : previewProperty.main_image_url ? '1 photo' : 'No photos']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n_s(Properties, \"GNLFld4o2riuORxop0lmFOfnWH0=\", false, function () {\n  return [useNavigate, useRole];\n});\n_c = Properties;\nvar _c;\n$RefreshReg$(_c, \"Properties\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useCallback","useNavigate","FaBed","FaCoins","FaImages","FaMapMarkerAlt","FaPen","FaTrash","FaRegEye","API","useRole","DEFAULT_PROPERTY_IMAGE","jsxDEV","_jsxDEV","priceFormatter","Intl","NumberFormat","style","currency","maximumFractionDigits","formatPrice","value","format","Number","Properties","_s","properties","setProperties","loading","setLoading","error","setError","currentUser","setCurrentUser","navigate","token","localStorage","getItem","isAuthenticated","Boolean","isHost","isTransitioning","pendingMode","canManageListings","fetchProperties","res","get","data","err","console","loadUser","_err$response","response","status","handleDelete","propertyId","window","confirm","delete","prev","filter","p","id","_err$response2","_err$response2$data","message","ownedByCurrentUser","property","user_id","visibleProperties","highlightCopy","length","openDetails","state","openCreatePage","openEditPage","openPreview","heroTitle","heroEyebrow","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","_p$property_type","property_type","toLowerCase","map","galleryImages","Array","isArray","gallery_images","heroImage","main_image_url","galleryCount","role","undefined","tabIndex","onKeyDown","e","key","src","alt","title","location","price","description","rooms","owner_name","event","stopPropagation","previewProperty","closePreview","_c","$RefreshReg$"],"sources":["C:/Users/User/Documents/Project/Smart-roommate-app/client/src/components/Properties.js"],"sourcesContent":["import React, { useEffect, useMemo, useState, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FaBed, FaCoins, FaImages, FaMapMarkerAlt, FaPen, FaTrash, FaRegEye } from 'react-icons/fa';\nimport API from '../services/api';\nimport { useRole } from '../context/RoleContext';\nimport { DEFAULT_PROPERTY_IMAGE } from '../constants/propertyMedia';\n\nconst priceFormatter = new Intl.NumberFormat('bs-BA', {\n  style: 'currency',\n  currency: 'BAM',\n  maximumFractionDigits: 0\n});\n\nconst formatPrice = (value) => priceFormatter.format(Number(value) || 0);\n\nexport default function Properties() {\n  const [properties, setProperties] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [currentUser, setCurrentUser] = useState(null);\n  const navigate = useNavigate();\n  const token = localStorage.getItem('token');\n  const isAuthenticated = Boolean(token);\n  const { isHost, isTransitioning, pendingMode } = useRole();\n  const canManageListings = isAuthenticated && isHost;\n\n  useEffect(() => {\n    const fetchProperties = async () => {\n      try {\n        setLoading(true);\n        const res = await API.get('/properties');\n        setProperties(res.data);\n        setError('');\n      } catch (err) {\n        console.error(err);\n        setError('Unable to load properties right now.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProperties();\n  }, []);\n\n  useEffect(() => {\n    const loadUser = async () => {\n      if (!token) {\n        setCurrentUser(null);\n        return;\n      }\n\n      try {\n        const res = await API.get('/users/me');\n        setCurrentUser(res.data);\n      } catch (err) {\n        if (err.response?.status === 401) {\n          setCurrentUser(null);\n        } else {\n          console.error(err);\n        }\n      }\n    };\n\n    loadUser();\n  }, [token]);\n\n  const handleDelete = async (propertyId) => {\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    if (!window.confirm('Delete this property?')) return;\n\n    try {\n      await API.delete(`/properties/${propertyId}`);\n      setProperties((prev) => prev.filter((p) => p.id !== propertyId));\n      setError('');\n    } catch (err) {\n      console.error(err);\n      setError(err.response?.data?.message || 'Unable to delete property.');\n    }\n  };\n\n  const ownedByCurrentUser = useCallback(\n    (property) => currentUser && property.user_id === currentUser.id,\n    [currentUser]\n  );\n\n  const visibleProperties = useMemo(() => {\n    if (isHost) {\n      if (!currentUser) return [];\n      return properties.filter((property) => ownedByCurrentUser(property));\n    }\n    return properties;\n  }, [isHost, currentUser, properties, ownedByCurrentUser]);\n\n  const highlightCopy = useMemo(() => {\n    if (isHost) {\n      if (!currentUser) return 'Loading your personal listings...';\n      if (!visibleProperties.length) return 'You have not created any properties yet. Start by adding one.';\n      return `You currently manage ${visibleProperties.length} ${\n        visibleProperties.length === 1 ? 'listing' : 'listings'\n      }.`;\n    }\n    return properties.length\n      ? `We found ${properties.length} ${properties.length === 1 ? 'place' : 'places'} across the community.`\n      : 'No spaces have been listed yet — be the first to add yours.';\n  }, [isHost, visibleProperties.length, properties.length, currentUser]);\n\n  const openDetails = (property) => {\n    if (isHost) return;\n    navigate(`/properties/${property.id}`, { state: { property } });\n  };\n  const openCreatePage = () => navigate('/properties/new');\n  const openEditPage = (property) => navigate(`/properties/${property.id}/edit`, { state: { property } });\n  const openPreview = (property) => navigate(`/properties/${property.id}`, { state: { property } });\n\n  const heroTitle = isHost ? 'My properties' : 'Beautiful shared homes curated for modern roommates';\n  const heroEyebrow = isHost ? 'Host center' : 'Explore';\n\n  return (\n    <div className=\"properties-page\">\n      <section className=\"properties-hero gradient-card\">\n        <div>\n          <p className=\"eyebrow text-uppercase fw-semibold mb-2\">{heroEyebrow}</p>\n          <h1 className=\"properties-title mb-3\">{heroTitle}</h1>\n          <p className=\"mb-4 text-light-emphasis\">{highlightCopy}</p>\n          {canManageListings && (\n            <button type=\"button\" className=\"btn btn-light btn-lg shadow-sm\" onClick={openCreatePage}>\n              List a new space\n            </button>\n          )}\n        </div>\n        <div className=\"properties-hero-meta\">\n          <div>\n            <span className=\"hero-number\">{visibleProperties.length || '00'}</span>\n            <p className=\"mb-0 text-light\">{isHost ? 'your listings' : 'active listings'}</p>\n          </div>\n          <div>\n            <span className=\"hero-number\">\n              {visibleProperties.filter((p) => p.property_type?.toLowerCase() === 'apartment').length || '0'}\n            </span>\n            <p className=\"mb-0 text-light\">{isHost ? 'apartment posts' : 'city apartments'}</p>\n          </div>\n        </div>\n      </section>\n\n      {isAuthenticated && isTransitioning && pendingMode === 'host' && (\n        <div className=\"alert alert-secondary shadow-sm mt-4\">Loading host tools for you. This will only take a moment.</div>\n      )}\n\n      {error && <div className=\"alert alert-danger shadow-sm mt-4\">{error}</div>}\n\n      <section className=\"properties-grid-wrapper mt-4\">\n        {loading ? (\n          <div className=\"card border-0 shadow-sm p-4 text-center\">Loading properties...</div>\n        ) : visibleProperties.length ? (\n          <div className=\"property-grid\">\n            {visibleProperties.map((property) => {\n              const galleryImages = Array.isArray(property.gallery_images)\n                ? property.gallery_images.filter(Boolean)\n                : [];\n              const heroImage = property.main_image_url || galleryImages[0] || DEFAULT_PROPERTY_IMAGE;\n              const galleryCount = galleryImages.length || (property.main_image_url ? 1 : 0);\n\n              return (\n                <article\n                  key={property.id}\n                  className={`property-card shadow-sm ${isHost ? 'property-card--host' : ''}`}\n                  role={!isHost ? 'button' : undefined}\n                  tabIndex={!isHost ? 0 : undefined}\n                  onClick={() => openDetails(property)}\n                  onKeyDown={(e) => {\n                    if (!isHost && e.key === 'Enter') openDetails(property);\n                  }}\n                >\n                  <div className=\"property-card__media\">\n                    <img src={heroImage} alt={property.title} loading=\"lazy\" />\n                    <span className=\"property-card__type\">{property.property_type || 'Listing'}</span>\n                    {!isHost && (\n                      <div className=\"property-card__overlay\">\n                        <span>View details</span>\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"property-card__body\">\n                    <div className=\"d-flex justify-content-between align-items-start gap-2 mb-2\">\n                      <div>\n                        <h2 className=\"property-card__title\">{property.title}</h2>\n                        <p className=\"property-card__location\">\n                          <FaMapMarkerAlt className=\"me-1 text-primary\" />\n                          {property.location}\n                        </p>\n                      </div>\n                      <div className=\"property-card__price\">\n                        <FaCoins className=\"me-1\" />\n                        {formatPrice(property.price)}\n                        <span className=\"text-muted\">/mo</span>\n                      </div>\n                    </div>\n                    {property.description && <p className=\"property-card__description\">{property.description}</p>}\n                    <div className=\"property-card__meta\">\n                      <span>\n                        <FaBed className=\"me-1\" />\n                        {property.rooms ? `${property.rooms} rooms` : 'Flexible rooms'}\n                      </span>\n                      <span>\n                        <FaImages className=\"me-1\" />\n                        {galleryCount ? `${galleryCount} photos` : 'No photos'}\n                      </span>\n                    </div>\n                    <div className=\"property-card__footer\">\n                      <span>Hosted by {property.owner_name}</span>\n                      {ownedByCurrentUser(property) && canManageListings && (\n                        <div className=\"property-card__actions\">\n                          <button\n                            type=\"button\"\n                            className=\"btn btn-outline-primary btn-sm\"\n                            onClick={(event) => {\n                              event.stopPropagation();\n                              openEditPage(property);\n                            }}\n                          >\n                            <FaPen className=\"me-1\" />\n                            Edit\n                          </button>\n                          <button\n                            type=\"button\"\n                            className=\"btn btn-outline-secondary btn-sm\"\n                            onClick={(event) => {\n                              event.stopPropagation();\n                              openPreview(property);\n                            }}\n                          >\n                            <FaRegEye className=\"me-1\" />\n                            Preview\n                          </button>\n                          <button\n                            type=\"button\"\n                            className=\"btn btn-outline-danger btn-sm\"\n                            onClick={(event) => {\n                              event.stopPropagation();\n                              handleDelete(property.id);\n                            }}\n                          >\n                            <FaTrash className=\"me-1\" />\n                            Delete\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </article>\n              );\n            })}\n          </div>\n        ) : (\n          <div className=\"card border-0 shadow-sm p-4 text-center text-muted\">\n            {isHost\n              ? 'You have not listed any properties yet. Click “List a new space” to get started.'\n              : 'There are no properties yet. Hosts can be the first to share a beautiful space.'}\n          </div>\n        )}\n      </section>\n\n      {previewProperty && (\n        <div className=\"property-preview-overlay\" role=\"dialog\" aria-modal=\"true\">\n          <div className=\"property-preview-card card shadow-lg border-0\">\n            <button type=\"button\" className=\"btn-close ms-auto\" aria-label=\"Close\" onClick={closePreview}></button>\n            <div className=\"property-preview-media\">\n              <img\n                src={\n                  previewProperty.main_image_url ||\n                  (Array.isArray(previewProperty.gallery_images) ? previewProperty.gallery_images[0] : '') ||\n                  DEFAULT_PROPERTY_IMAGE\n                }\n                alt={previewProperty.title}\n              />\n            </div>\n            <div className=\"property-preview-body\">\n              <h2 className=\"h4\">{previewProperty.title}</h2>\n              <p className=\"text-muted mb-2\">{previewProperty.location}</p>\n              <p className=\"fw-semibold mb-3\">\n                <FaCoins className=\"me-1\" />\n                {formatPrice(previewProperty.price)} <span className=\"text-muted\">per month</span>\n              </p>\n              {previewProperty.description ? (\n                <p>{previewProperty.description}</p>\n              ) : (\n                <p className=\"text-muted fst-italic\">No description provided yet.</p>\n              )}\n              <div className=\"property-card__meta\">\n                <span>\n                  <FaBed className=\"me-1\" />\n                  {previewProperty.rooms ? `${previewProperty.rooms} rooms` : 'Flexible rooms'}\n                </span>\n                <span>\n                  <FaImages className=\"me-1\" />\n                  {Array.isArray(previewProperty.gallery_images) && previewProperty.gallery_images.length\n                    ? `${previewProperty.gallery_images.length} photos`\n                    : previewProperty.main_image_url\n                      ? '1 photo'\n                      : 'No photos'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}