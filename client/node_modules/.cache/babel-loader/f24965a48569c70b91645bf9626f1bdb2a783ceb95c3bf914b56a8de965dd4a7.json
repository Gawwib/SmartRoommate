{"ast":null,"code":"import React,{useEffect,useMemo,useState,useCallback}from'react';import{useNavigate}from'react-router-dom';import{FaBed,FaCoins,FaImages,FaMapMarkerAlt,FaPen,FaTrash,FaRegEye}from'react-icons/fa';import API from'../services/api';import{useRole}from'../context/RoleContext';import{DEFAULT_PROPERTY_IMAGE}from'../constants/propertyMedia';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const priceFormatter=new Intl.NumberFormat('bs-BA',{style:'currency',currency:'BAM',maximumFractionDigits:0});const formatPrice=value=>priceFormatter.format(Number(value)||0);export default function Properties(){const[properties,setProperties]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[currentUser,setCurrentUser]=useState(null);const navigate=useNavigate();const token=localStorage.getItem('token');const isAuthenticated=Boolean(token);const{isHost,isTransitioning,pendingMode}=useRole();const canManageListings=isAuthenticated&&isHost;useEffect(()=>{const fetchProperties=async()=>{try{setLoading(true);const res=await API.get('/properties');setProperties(res.data);setError('');}catch(err){console.error(err);setError('Unable to load properties right now.');}finally{setLoading(false);}};fetchProperties();},[]);useEffect(()=>{const loadUser=async()=>{if(!token){setCurrentUser(null);return;}try{const res=await API.get('/users/me');setCurrentUser(res.data);}catch(err){var _err$response;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401){setCurrentUser(null);}else{console.error(err);}}};loadUser();},[token]);const handleDelete=async propertyId=>{if(!token){navigate('/login');return;}if(!window.confirm('Delete this property?'))return;try{await API.delete(\"/properties/\".concat(propertyId));setProperties(prev=>prev.filter(p=>p.id!==propertyId));setError('');}catch(err){var _err$response2,_err$response2$data;console.error(err);setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Unable to delete property.');}};const ownedByCurrentUser=useCallback(property=>currentUser&&property.user_id===currentUser.id,[currentUser]);const visibleProperties=useMemo(()=>{if(isHost){if(!currentUser)return[];return properties.filter(property=>ownedByCurrentUser(property));}return properties;},[isHost,currentUser,properties,ownedByCurrentUser]);const highlightCopy=useMemo(()=>{if(isHost){if(!currentUser)return'Loading your personal listings...';if(!visibleProperties.length)return'You have not created any properties yet. Start by adding one.';return\"You currently manage \".concat(visibleProperties.length,\" \").concat(visibleProperties.length===1?'listing':'listings',\".\");}return properties.length?\"We found \".concat(properties.length,\" \").concat(properties.length===1?'place':'places',\" across the community.\"):'No spaces have been listed yet — be the first to add yours.';},[isHost,visibleProperties.length,properties.length,currentUser]);const openDetails=property=>{if(isHost)return;navigate(\"/properties/\".concat(property.id),{state:{property}});};const openCreatePage=()=>navigate('/properties/new');const openEditPage=property=>navigate(\"/properties/\".concat(property.id,\"/edit\"),{state:{property}});const openPreview=property=>navigate(\"/properties/\".concat(property.id),{state:{property}});const heroTitle=isHost?'My properties':'Beautiful shared homes curated for modern roommates';const heroEyebrow=isHost?'Host center':'Explore';return/*#__PURE__*/_jsxs(\"div\",{className:\"properties-page\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"properties-hero gradient-card\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"eyebrow text-uppercase fw-semibold mb-2\",children:heroEyebrow}),/*#__PURE__*/_jsx(\"h1\",{className:\"properties-title mb-3\",children:heroTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 text-light-emphasis\",children:highlightCopy}),canManageListings&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-light btn-lg shadow-sm\",onClick:openCreatePage,children:\"List a new space\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"properties-hero-meta\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"hero-number\",children:visibleProperties.length||'00'}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-light\",children:isHost?'your listings':'active listings'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"hero-number\",children:visibleProperties.filter(p=>{var _p$property_type;return((_p$property_type=p.property_type)===null||_p$property_type===void 0?void 0:_p$property_type.toLowerCase())==='apartment';}).length||'0'}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-light\",children:isHost?'apartment posts':'city apartments'})]})]})]}),isAuthenticated&&isTransitioning&&pendingMode==='host'&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-secondary shadow-sm mt-4\",children:\"Loading host tools for you. This will only take a moment.\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger shadow-sm mt-4\",children:error}),/*#__PURE__*/_jsx(\"section\",{className:\"properties-grid-wrapper mt-4\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"card border-0 shadow-sm p-4 text-center\",children:\"Loading properties...\"}):visibleProperties.length?/*#__PURE__*/_jsx(\"div\",{className:\"property-grid\",children:visibleProperties.map(property=>{const galleryImages=Array.isArray(property.gallery_images)?property.gallery_images.filter(Boolean):[];const heroImage=property.main_image_url||galleryImages[0]||DEFAULT_PROPERTY_IMAGE;const galleryCount=galleryImages.length||(property.main_image_url?1:0);return/*#__PURE__*/_jsxs(\"article\",{className:\"property-card shadow-sm \".concat(isHost?'property-card--host':''),role:!isHost?'button':undefined,tabIndex:!isHost?0:undefined,onClick:()=>openDetails(property),onKeyDown:e=>{if(!isHost&&e.key==='Enter')openDetails(property);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"property-card__media\",children:[/*#__PURE__*/_jsx(\"img\",{src:heroImage,alt:property.title,loading:\"lazy\"}),/*#__PURE__*/_jsx(\"span\",{className:\"property-card__type\",children:property.property_type||'Listing'}),!isHost&&/*#__PURE__*/_jsx(\"div\",{className:\"property-card__overlay\",children:/*#__PURE__*/_jsx(\"span\",{children:\"View details\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"property-card__body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-start gap-2 mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"property-card__title\",children:property.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"property-card__location\",children:[/*#__PURE__*/_jsx(FaMapMarkerAlt,{className:\"me-1 text-dark\"}),property.location]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"property-card__price\",children:[/*#__PURE__*/_jsx(FaCoins,{className:\"me-1\"}),formatPrice(property.price),/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:\"/mo\"})]})]}),property.description&&/*#__PURE__*/_jsx(\"p\",{className:\"property-card__description\",children:property.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"property-card__meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(FaBed,{className:\"me-1\"}),property.rooms?\"\".concat(property.rooms,\" rooms\"):'Flexible rooms']}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(FaImages,{className:\"me-1\"}),galleryCount?\"\".concat(galleryCount,\" photos\"):'No photos']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"property-card__footer\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Hosted by \",property.owner_name]}),ownedByCurrentUser(property)&&canManageListings&&/*#__PURE__*/_jsxs(\"div\",{className:\"property-card__actions\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-outline-primary btn-sm\",onClick:event=>{event.stopPropagation();openEditPage(property);},children:[/*#__PURE__*/_jsx(FaPen,{className:\"me-1\"}),\"Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-outline-secondary btn-sm\",onClick:event=>{event.stopPropagation();openPreview(property);},children:[/*#__PURE__*/_jsx(FaRegEye,{className:\"me-1\"}),\"Preview\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-outline-danger btn-sm\",onClick:event=>{event.stopPropagation();handleDelete(property.id);},children:[/*#__PURE__*/_jsx(FaTrash,{className:\"me-1\"}),\"Delete\"]})]})]})]})]},property.id);})}):/*#__PURE__*/_jsx(\"div\",{className:\"card border-0 shadow-sm p-4 text-center text-muted\",children:isHost?'You have not listed any properties yet. Click “List a new space” to get started.':'There are no properties yet. Hosts can be the first to share a beautiful space.'})})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","useCallback","useNavigate","FaBed","FaCoins","FaImages","FaMapMarkerAlt","FaPen","FaTrash","FaRegEye","API","useRole","DEFAULT_PROPERTY_IMAGE","jsx","_jsx","jsxs","_jsxs","priceFormatter","Intl","NumberFormat","style","currency","maximumFractionDigits","formatPrice","value","format","Number","Properties","properties","setProperties","loading","setLoading","error","setError","currentUser","setCurrentUser","navigate","token","localStorage","getItem","isAuthenticated","Boolean","isHost","isTransitioning","pendingMode","canManageListings","fetchProperties","res","get","data","err","console","loadUser","_err$response","response","status","handleDelete","propertyId","window","confirm","delete","concat","prev","filter","p","id","_err$response2","_err$response2$data","message","ownedByCurrentUser","property","user_id","visibleProperties","highlightCopy","length","openDetails","state","openCreatePage","openEditPage","openPreview","heroTitle","heroEyebrow","className","children","type","onClick","_p$property_type","property_type","toLowerCase","map","galleryImages","Array","isArray","gallery_images","heroImage","main_image_url","galleryCount","role","undefined","tabIndex","onKeyDown","e","key","src","alt","title","location","price","description","rooms","owner_name","event","stopPropagation"],"sources":["C:/Users/User/Documents/Project/Smart-roommate-app/client/src/components/Properties.js"],"sourcesContent":["import React, { useEffect, useMemo, useState, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FaBed, FaCoins, FaImages, FaMapMarkerAlt, FaPen, FaTrash, FaRegEye } from 'react-icons/fa';\nimport API from '../services/api';\nimport { useRole } from '../context/RoleContext';\nimport { DEFAULT_PROPERTY_IMAGE } from '../constants/propertyMedia';\n\nconst priceFormatter = new Intl.NumberFormat('bs-BA', {\n  style: 'currency',\n  currency: 'BAM',\n  maximumFractionDigits: 0\n});\n\nconst formatPrice = (value) => priceFormatter.format(Number(value) || 0);\n\nexport default function Properties() {\n  const [properties, setProperties] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [currentUser, setCurrentUser] = useState(null);\n  const navigate = useNavigate();\n  const token = localStorage.getItem('token');\n  const isAuthenticated = Boolean(token);\n  const { isHost, isTransitioning, pendingMode } = useRole();\n  const canManageListings = isAuthenticated && isHost;\n\n  useEffect(() => {\n    const fetchProperties = async () => {\n      try {\n        setLoading(true);\n        const res = await API.get('/properties');\n        setProperties(res.data);\n        setError('');\n      } catch (err) {\n        console.error(err);\n        setError('Unable to load properties right now.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProperties();\n  }, []);\n\n  useEffect(() => {\n    const loadUser = async () => {\n      if (!token) {\n        setCurrentUser(null);\n        return;\n      }\n\n      try {\n        const res = await API.get('/users/me');\n        setCurrentUser(res.data);\n      } catch (err) {\n        if (err.response?.status === 401) {\n          setCurrentUser(null);\n        } else {\n          console.error(err);\n        }\n      }\n    };\n\n    loadUser();\n  }, [token]);\n\n  const handleDelete = async (propertyId) => {\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    if (!window.confirm('Delete this property?')) return;\n\n    try {\n      await API.delete(`/properties/${propertyId}`);\n      setProperties((prev) => prev.filter((p) => p.id !== propertyId));\n      setError('');\n    } catch (err) {\n      console.error(err);\n      setError(err.response?.data?.message || 'Unable to delete property.');\n    }\n  };\n\n  const ownedByCurrentUser = useCallback(\n    (property) => currentUser && property.user_id === currentUser.id,\n    [currentUser]\n  );\n\n  const visibleProperties = useMemo(() => {\n    if (isHost) {\n      if (!currentUser) return [];\n      return properties.filter((property) => ownedByCurrentUser(property));\n    }\n    return properties;\n  }, [isHost, currentUser, properties, ownedByCurrentUser]);\n\n  const highlightCopy = useMemo(() => {\n    if (isHost) {\n      if (!currentUser) return 'Loading your personal listings...';\n      if (!visibleProperties.length) return 'You have not created any properties yet. Start by adding one.';\n      return `You currently manage ${visibleProperties.length} ${\n        visibleProperties.length === 1 ? 'listing' : 'listings'\n      }.`;\n    }\n    return properties.length\n      ? `We found ${properties.length} ${properties.length === 1 ? 'place' : 'places'} across the community.`\n      : 'No spaces have been listed yet — be the first to add yours.';\n  }, [isHost, visibleProperties.length, properties.length, currentUser]);\n\n  const openDetails = (property) => {\n    if (isHost) return;\n    navigate(`/properties/${property.id}`, { state: { property } });\n  };\n  const openCreatePage = () => navigate('/properties/new');\n  const openEditPage = (property) => navigate(`/properties/${property.id}/edit`, { state: { property } });\n  const openPreview = (property) => navigate(`/properties/${property.id}`, { state: { property } });\n\n  const heroTitle = isHost ? 'My properties' : 'Beautiful shared homes curated for modern roommates';\n  const heroEyebrow = isHost ? 'Host center' : 'Explore';\n\n  return (\n    <div className=\"properties-page\">\n      <section className=\"properties-hero gradient-card\">\n        <div>\n          <p className=\"eyebrow text-uppercase fw-semibold mb-2\">{heroEyebrow}</p>\n          <h1 className=\"properties-title mb-3\">{heroTitle}</h1>\n          <p className=\"mb-4 text-light-emphasis\">{highlightCopy}</p>\n          {canManageListings && (\n            <button type=\"button\" className=\"btn btn-light btn-lg shadow-sm\" onClick={openCreatePage}>\n              List a new space\n            </button>\n          )}\n        </div>\n        <div className=\"properties-hero-meta\">\n          <div>\n            <span className=\"hero-number\">{visibleProperties.length || '00'}</span>\n            <p className=\"mb-0 text-light\">{isHost ? 'your listings' : 'active listings'}</p>\n          </div>\n          <div>\n            <span className=\"hero-number\">\n              {visibleProperties.filter((p) => p.property_type?.toLowerCase() === 'apartment').length || '0'}\n            </span>\n            <p className=\"mb-0 text-light\">{isHost ? 'apartment posts' : 'city apartments'}</p>\n          </div>\n        </div>\n      </section>\n\n      {isAuthenticated && isTransitioning && pendingMode === 'host' && (\n        <div className=\"alert alert-secondary shadow-sm mt-4\">Loading host tools for you. This will only take a moment.</div>\n      )}\n\n      {error && <div className=\"alert alert-danger shadow-sm mt-4\">{error}</div>}\n\n      <section className=\"properties-grid-wrapper mt-4\">\n        {loading ? (\n          <div className=\"card border-0 shadow-sm p-4 text-center\">Loading properties...</div>\n        ) : visibleProperties.length ? (\n          <div className=\"property-grid\">\n            {visibleProperties.map((property) => {\n              const galleryImages = Array.isArray(property.gallery_images)\n                ? property.gallery_images.filter(Boolean)\n                : [];\n              const heroImage = property.main_image_url || galleryImages[0] || DEFAULT_PROPERTY_IMAGE;\n              const galleryCount = galleryImages.length || (property.main_image_url ? 1 : 0);\n\n              return (\n                <article\n                  key={property.id}\n                  className={`property-card shadow-sm ${isHost ? 'property-card--host' : ''}`}\n                  role={!isHost ? 'button' : undefined}\n                  tabIndex={!isHost ? 0 : undefined}\n                  onClick={() => openDetails(property)}\n                  onKeyDown={(e) => {\n                    if (!isHost && e.key === 'Enter') openDetails(property);\n                  }}\n                >\n                  <div className=\"property-card__media\">\n                    <img src={heroImage} alt={property.title} loading=\"lazy\" />\n                    <span className=\"property-card__type\">{property.property_type || 'Listing'}</span>\n                    {!isHost && (\n                      <div className=\"property-card__overlay\">\n                        <span>View details</span>\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"property-card__body\">\n                    <div className=\"d-flex justify-content-between align-items-start gap-2 mb-2\">\n                      <div>\n                        <h2 className=\"property-card__title\">{property.title}</h2>\n                        <p className=\"property-card__location\">\n                          <FaMapMarkerAlt className=\"me-1 text-dark\" />\n                          {property.location}\n                        </p>\n                      </div>\n                      <div className=\"property-card__price\">\n                        <FaCoins className=\"me-1\" />\n                        {formatPrice(property.price)}\n                        <span className=\"text-muted\">/mo</span>\n                      </div>\n                    </div>\n                    {property.description && <p className=\"property-card__description\">{property.description}</p>}\n                    <div className=\"property-card__meta\">\n                      <span>\n                        <FaBed className=\"me-1\" />\n                        {property.rooms ? `${property.rooms} rooms` : 'Flexible rooms'}\n                      </span>\n                      <span>\n                        <FaImages className=\"me-1\" />\n                        {galleryCount ? `${galleryCount} photos` : 'No photos'}\n                      </span>\n                    </div>\n                    <div className=\"property-card__footer\">\n                      <span>Hosted by {property.owner_name}</span>\n                      {ownedByCurrentUser(property) && canManageListings && (\n                        <div className=\"property-card__actions\">\n                          <button\n                            type=\"button\"\n                            className=\"btn btn-outline-primary btn-sm\"\n                            onClick={(event) => {\n                              event.stopPropagation();\n                              openEditPage(property);\n                            }}\n                          >\n                            <FaPen className=\"me-1\" />\n                            Edit\n                          </button>\n                          <button\n                            type=\"button\"\n                            className=\"btn btn-outline-secondary btn-sm\"\n                            onClick={(event) => {\n                              event.stopPropagation();\n                              openPreview(property);\n                            }}\n                          >\n                            <FaRegEye className=\"me-1\" />\n                            Preview\n                          </button>\n                          <button\n                            type=\"button\"\n                            className=\"btn btn-outline-danger btn-sm\"\n                            onClick={(event) => {\n                              event.stopPropagation();\n                              handleDelete(property.id);\n                            }}\n                          >\n                            <FaTrash className=\"me-1\" />\n                            Delete\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </article>\n              );\n            })}\n          </div>\n        ) : (\n          <div className=\"card border-0 shadow-sm p-4 text-center text-muted\">\n            {isHost\n              ? 'You have not listed any properties yet. Click “List a new space” to get started.'\n              : 'There are no properties yet. Hosts can be the first to share a beautiful space.'}\n          </div>\n        )}\n      </section>\n\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}