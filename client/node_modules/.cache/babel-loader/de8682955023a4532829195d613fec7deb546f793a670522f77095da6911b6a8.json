{"ast":null,"code":"import _objectSpread from\"C:/Users/User/Documents/Project/Smart-roommate-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from'react';import{useNavigate}from'react-router-dom';import API from'../services/api';import{DEFAULT_PROPERTY_IMAGE}from'../constants/propertyMedia';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HABIT_OPTIONS=['Cinema','Football','Basketball','Tennis','Running','Cycling','Hiking','Swimming','Gym / Fitness','Yoga','Pilates','Cooking','Baking','Coffee shops','Tea lover','Wine tasting','Craft beer','Board games','Card games','Video games','Esports','Anime','Manga','Reading','Writing','Photography','Videography','Art galleries','Museums','Concerts','Live music','Festivals','Travel','Road trips','Camping','Beach days','Shopping','Thrifting','Fashion','Interior design','DIY projects','Gardening','Plants','Pets / Dogs','Pets / Cats','Volunteering','Meditation','Language learning','Tech & gadgets','Podcasts','Stand-up comedy','Dancing'];const MIN_HABITS=3;const MAX_HABITS=8;const BIO_LIMIT=30;const parseHabits=value=>(value||'').split(',').map(item=>item.trim()).filter(Boolean);const formatHabits=list=>list.join(', ');const calculateAge=birthdate=>{if(!birthdate)return null;const dob=new Date(birthdate);if(Number.isNaN(dob.getTime()))return null;const diff=Date.now()-dob.getTime();const ageDate=new Date(diff);return Math.abs(ageDate.getUTCFullYear()-1970);};export default function Profile(){const[profile,setProfile]=useState(null);const[form,setForm]=useState({birthdate:'',gender:'',location:'',bio:'',habits:[],profileImage:''});const[msg,setMsg]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[uploading,setUploading]=useState(false);const[imagePosition,setImagePosition]=useState({x:50,y:50});const navigate=useNavigate();useEffect(()=>{const load=async()=>{try{const res=await API.get('/users/me');const interests=parseHabits(res.data.habits);setProfile(res.data);const savedPos=res.data.id&&localStorage.getItem(\"profileImagePos_\".concat(res.data.id))?JSON.parse(localStorage.getItem(\"profileImagePos_\".concat(res.data.id))):{x:50,y:50};setImagePosition(savedPos);setForm({birthdate:res.data.birthdate?res.data.birthdate.slice(0,10):'2003-01-01',gender:res.data.gender||'',location:res.data.location||'',bio:res.data.bio||'',habits:interests,profileImage:res.data.profile_image_url||''});}catch(err){var _err$response;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401){setError('Please log in to view your profile.');}else{setError('Unable to load your profile right now.');}}finally{setLoading(false);}};load();},[]);const handleHabitToggle=habit=>{setForm(prev=>{const alreadySelected=prev.habits.includes(habit);if(alreadySelected){return _objectSpread(_objectSpread({},prev),{},{habits:prev.habits.filter(h=>h!==habit)});}if(prev.habits.length>=MAX_HABITS)return prev;return _objectSpread(_objectSpread({},prev),{},{habits:[...prev.habits,habit]});});};const handleChange=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const persistProfileImage=async url=>{const age=calculateAge(form.birthdate||(profile===null||profile===void 0?void 0:profile.birthdate)||'2003-01-01');const payload={birthdate:(profile===null||profile===void 0?void 0:profile.birthdate)||'2003-01-01',age,gender:form.gender||(profile===null||profile===void 0?void 0:profile.gender)||null,location:form.location||(profile===null||profile===void 0?void 0:profile.location)||'',budget:null,habits:formatHabits(form.habits),profile_image_url:url,bio:form.bio||(profile===null||profile===void 0?void 0:profile.bio)||''};try{await API.put('/users/me',payload);setProfile(prev=>_objectSpread(_objectSpread({},prev),payload));}catch(err){var _err$response2,_err$response2$data;console.error(err);setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Unable to save photo.');}};const handlePhotoUpload=async event=>{const files=Array.from(event.target.files||[]);if(!files.length)return;const formData=new FormData();formData.append('images',files[0]);try{var _res$data,_res$data$urls;setUploading(true);const res=await API.post('/uploads',formData,{headers:{'Content-Type':'multipart/form-data'}});const url=(_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$urls=_res$data.urls)===null||_res$data$urls===void 0?void 0:_res$data$urls[0];if(url){setForm(prev=>_objectSpread(_objectSpread({},prev),{},{profileImage:url}));await persistProfileImage(url);}}catch(err){var _err$response3,_err$response3$data;console.error(err);setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||'Unable to upload photo.');}finally{setUploading(false);event.target.value='';}};const handleSubmit=async e=>{e.preventDefault();setMsg('');setError('');if(form.habits.length<MIN_HABITS||form.habits.length>MAX_HABITS){setError(\"Choose at least \".concat(MIN_HABITS,\" and at most \").concat(MAX_HABITS,\" interests.\"));return;}if(!form.gender){setError('Please select your gender.');return;}if(!form.bio.trim()){setError('Add a short bio about yourself (max 30 characters).');return;}if(form.bio.trim().length>BIO_LIMIT){setError('Bio must be 30 characters or fewer.');return;}const age=calculateAge(form.birthdate||(profile===null||profile===void 0?void 0:profile.birthdate)||'2003-01-01');const payload={birthdate:(profile===null||profile===void 0?void 0:profile.birthdate)||'2003-01-01',age,gender:form.gender||null,location:form.location||'',budget:null,habits:formatHabits(form.habits),profile_image_url:form.profileImage||(profile===null||profile===void 0?void 0:profile.profile_image_url)||null,bio:form.bio.trim()};try{setSaving(true);await API.put('/users/me',payload);setMsg('Profile updated');setProfile(prev=>_objectSpread(_objectSpread({},prev),payload));if(profile!==null&&profile!==void 0&&profile.id){localStorage.setItem(\"profileImagePos_\".concat(profile.id),JSON.stringify(imagePosition));}}catch(err){var _err$response4,_err$response4$data;console.error(err);setError(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.message)||'Unable to update profile right now.');}finally{setSaving(false);}};const ageDisplay=useMemo(()=>calculateAge(form.birthdate||(profile===null||profile===void 0?void 0:profile.birthdate)),[form.birthdate,profile]);const birthYear=useMemo(()=>profile!==null&&profile!==void 0&&profile.birthdate?new Date(profile.birthdate).getFullYear():null,[profile===null||profile===void 0?void 0:profile.birthdate]);const displayImage=form.profileImage||(profile===null||profile===void 0?void 0:profile.profile_image_url)||DEFAULT_PROPERTY_IMAGE;const handlePositionChange=(axis,value)=>{setImagePosition(prev=>_objectSpread(_objectSpread({},prev),{},{[axis]:Number(value)}));};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error&&!profile){return/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary btn-sm\",onClick:()=>navigate('/login'),children:\"Go to login\"})]});}if(!profile)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-hero-card shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-hero-image\",children:[/*#__PURE__*/_jsx(\"img\",{src:displayImage,alt:\"Profile\",style:{objectPosition:\"\".concat(imagePosition.x,\"% \").concat(imagePosition.y,\"%\")}}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-hero-overlay\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-dot\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-light small\",children:\"Online now\"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-light mb-1\",children:ageDisplay!==null?\"\".concat(profile.name,\", \").concat(ageDisplay):profile.name}),birthYear&&/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1 text-light small\",children:[\"Born \",birthYear]}),profile.location&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-1 text-light\",children:profile.location}),form.bio&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-2 text-light fw-semibold\",children:form.bio}),form.habits.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"pill-row\",children:form.habits.slice(0,6).map(habit=>/*#__PURE__*/_jsx(\"span\",{className:\"pill pill-selected small\",children:habit},habit))})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card border-0 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"eyebrow text-uppercase mb-1\",children:\"Improve your matches\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"h5\",children:\"Update profile\"}),msg&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info mt-2\",children:msg}),error&&profile&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning mt-2\",children:error}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-3\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label d-block\",children:\"Gender *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"gender\",id:\"gender-male\",value:\"male\",checked:form.gender==='male',onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"gender-male\",children:\"Male\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"gender\",id:\"gender-female\",value:\"female\",checked:form.gender==='female',onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"gender-female\",children:\"Female\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{name:\"location\",value:form.location,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-1\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label mb-0\",children:[\"Interests (select \",MIN_HABITS,\"-\",MAX_HABITS,\") *\"]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[form.habits.length,\" selected\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pill-grid selectable\",children:HABIT_OPTIONS.map(option=>{const selected=form.habits.includes(option);const disabled=!selected&&form.habits.length>=MAX_HABITS;return/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"pill \".concat(selected?'pill-selected':''),onClick:()=>handleHabitToggle(option),disabled:disabled,children:option},option);})}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"We\\u2019ll use these to improve AI roommate compatibility. Pick what genuinely matters to you.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label mb-0\",children:\"My bio *\"}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[form.bio.length,\"/\",BIO_LIMIT]})]}),/*#__PURE__*/_jsx(\"input\",{name:\"bio\",value:form.bio,onChange:e=>{if(e.target.value.length<=BIO_LIMIT)handleChange(e);},className:\"form-control\",placeholder:\"Short sentence about you\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Profile photo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-avatar small\",children:displayImage?/*#__PURE__*/_jsx(\"img\",{src:displayImage,alt:\"Profile\",style:{objectPosition:\"\".concat(imagePosition.x,\"% \").concat(imagePosition.y,\"%\")}}):/*#__PURE__*/_jsx(\"span\",{children:\"?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"form-control\",onChange:handlePhotoUpload,disabled:uploading}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Upload one clear photo (max 5MB). Save after upload to keep changes.\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Adjust photo focus\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block mb-1\",children:\"Horizontal\"}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"100\",value:imagePosition.x,onChange:e=>handlePositionChange('x',e.target.value),className:\"form-range\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block mb-1\",children:\"Vertical\"}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"100\",value:imagePosition.y,onChange:e=>handlePositionChange('y',e.target.value),className:\"form-range\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",disabled:saving,children:saving?'Saving...':'Save profile'})]})]})})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","useNavigate","API","DEFAULT_PROPERTY_IMAGE","jsx","_jsx","jsxs","_jsxs","HABIT_OPTIONS","MIN_HABITS","MAX_HABITS","BIO_LIMIT","parseHabits","value","split","map","item","trim","filter","Boolean","formatHabits","list","join","calculateAge","birthdate","dob","Date","Number","isNaN","getTime","diff","now","ageDate","Math","abs","getUTCFullYear","Profile","profile","setProfile","form","setForm","gender","location","bio","habits","profileImage","msg","setMsg","error","setError","loading","setLoading","saving","setSaving","uploading","setUploading","imagePosition","setImagePosition","x","y","navigate","load","res","get","interests","data","savedPos","id","localStorage","getItem","concat","JSON","parse","slice","profile_image_url","err","_err$response","response","status","handleHabitToggle","habit","prev","alreadySelected","includes","_objectSpread","h","length","handleChange","e","target","name","persistProfileImage","url","age","payload","budget","put","_err$response2","_err$response2$data","console","message","handlePhotoUpload","event","files","Array","from","formData","FormData","append","_res$data","_res$data$urls","post","headers","urls","_err$response3","_err$response3$data","handleSubmit","preventDefault","setItem","stringify","_err$response4","_err$response4$data","ageDisplay","birthYear","getFullYear","displayImage","handlePositionChange","axis","children","className","type","onClick","src","alt","style","objectPosition","onSubmit","checked","onChange","required","htmlFor","option","selected","disabled","placeholder","accept","min","max"],"sources":["C:/Users/User/Documents/Project/Smart-roommate-app/client/src/components/Profile.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport API from '../services/api';\nimport { DEFAULT_PROPERTY_IMAGE } from '../constants/propertyMedia';\n\nconst HABIT_OPTIONS = [\n  'Cinema',\n  'Football',\n  'Basketball',\n  'Tennis',\n  'Running',\n  'Cycling',\n  'Hiking',\n  'Swimming',\n  'Gym / Fitness',\n  'Yoga',\n  'Pilates',\n  'Cooking',\n  'Baking',\n  'Coffee shops',\n  'Tea lover',\n  'Wine tasting',\n  'Craft beer',\n  'Board games',\n  'Card games',\n  'Video games',\n  'Esports',\n  'Anime',\n  'Manga',\n  'Reading',\n  'Writing',\n  'Photography',\n  'Videography',\n  'Art galleries',\n  'Museums',\n  'Concerts',\n  'Live music',\n  'Festivals',\n  'Travel',\n  'Road trips',\n  'Camping',\n  'Beach days',\n  'Shopping',\n  'Thrifting',\n  'Fashion',\n  'Interior design',\n  'DIY projects',\n  'Gardening',\n  'Plants',\n  'Pets / Dogs',\n  'Pets / Cats',\n  'Volunteering',\n  'Meditation',\n  'Language learning',\n  'Tech & gadgets',\n  'Podcasts',\n  'Stand-up comedy',\n  'Dancing'\n];\n\nconst MIN_HABITS = 3;\nconst MAX_HABITS = 8;\nconst BIO_LIMIT = 30;\n\nconst parseHabits = (value) =>\n  (value || '')\n    .split(',')\n    .map((item) => item.trim())\n    .filter(Boolean);\n\nconst formatHabits = (list) => list.join(', ');\n\nconst calculateAge = (birthdate) => {\n  if (!birthdate) return null;\n  const dob = new Date(birthdate);\n  if (Number.isNaN(dob.getTime())) return null;\n  const diff = Date.now() - dob.getTime();\n  const ageDate = new Date(diff);\n  return Math.abs(ageDate.getUTCFullYear() - 1970);\n};\n\nexport default function Profile() {\n  const [profile, setProfile] = useState(null);\n  const [form, setForm] = useState({\n    birthdate: '',\n    gender: '',\n    location: '',\n    bio: '',\n    habits: [],\n    profileImage: ''\n  });\n  const [msg, setMsg] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [imagePosition, setImagePosition] = useState({ x: 50, y: 50 });\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const res = await API.get('/users/me');\n        const interests = parseHabits(res.data.habits);\n        setProfile(res.data);\n        const savedPos =\n          res.data.id && localStorage.getItem(`profileImagePos_${res.data.id}`)\n            ? JSON.parse(localStorage.getItem(`profileImagePos_${res.data.id}`))\n            : { x: 50, y: 50 };\n        setImagePosition(savedPos);\n        setForm({\n          birthdate: res.data.birthdate ? res.data.birthdate.slice(0, 10) : '2003-01-01',\n          gender: res.data.gender || '',\n          location: res.data.location || '',\n          bio: res.data.bio || '',\n          habits: interests,\n          profileImage: res.data.profile_image_url || ''\n        });\n      } catch (err) {\n        if (err.response?.status === 401) {\n          setError('Please log in to view your profile.');\n        } else {\n          setError('Unable to load your profile right now.');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, []);\n\n  const handleHabitToggle = (habit) => {\n    setForm((prev) => {\n      const alreadySelected = prev.habits.includes(habit);\n      if (alreadySelected) {\n        return { ...prev, habits: prev.habits.filter((h) => h !== habit) };\n      }\n      if (prev.habits.length >= MAX_HABITS) return prev;\n      return { ...prev, habits: [...prev.habits, habit] };\n    });\n  };\n\n  const handleChange = (e) => setForm({ ...form, [e.target.name]: e.target.value });\n\n  const persistProfileImage = async (url) => {\n    const age = calculateAge(form.birthdate || profile?.birthdate || '2003-01-01');\n    const payload = {\n      birthdate: profile?.birthdate || '2003-01-01',\n      age,\n      gender: form.gender || profile?.gender || null,\n      location: form.location || profile?.location || '',\n      budget: null,\n      habits: formatHabits(form.habits),\n      profile_image_url: url,\n      bio: form.bio || profile?.bio || ''\n    };\n    try {\n      await API.put('/users/me', payload);\n      setProfile((prev) => ({ ...prev, ...payload }));\n    } catch (err) {\n      console.error(err);\n      setError(err.response?.data?.message || 'Unable to save photo.');\n    }\n  };\n\n  const handlePhotoUpload = async (event) => {\n    const files = Array.from(event.target.files || []);\n    if (!files.length) return;\n    const formData = new FormData();\n    formData.append('images', files[0]);\n    try {\n      setUploading(true);\n      const res = await API.post('/uploads', formData, { headers: { 'Content-Type': 'multipart/form-data' } });\n      const url = res.data?.urls?.[0];\n      if (url) {\n        setForm((prev) => ({ ...prev, profileImage: url }));\n        await persistProfileImage(url);\n      }\n    } catch (err) {\n      console.error(err);\n      setError(err.response?.data?.message || 'Unable to upload photo.');\n    } finally {\n      setUploading(false);\n      event.target.value = '';\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setMsg('');\n    setError('');\n\n    if (form.habits.length < MIN_HABITS || form.habits.length > MAX_HABITS) {\n      setError(`Choose at least ${MIN_HABITS} and at most ${MAX_HABITS} interests.`);\n      return;\n    }\n\n    if (!form.gender) {\n      setError('Please select your gender.');\n      return;\n    }\n\n    if (!form.bio.trim()) {\n      setError('Add a short bio about yourself (max 30 characters).');\n      return;\n    }\n\n    if (form.bio.trim().length > BIO_LIMIT) {\n      setError('Bio must be 30 characters or fewer.');\n      return;\n    }\n\n    const age = calculateAge(form.birthdate || profile?.birthdate || '2003-01-01');\n    const payload = {\n      birthdate: profile?.birthdate || '2003-01-01',\n      age,\n      gender: form.gender || null,\n      location: form.location || '',\n      budget: null,\n      habits: formatHabits(form.habits),\n      profile_image_url: form.profileImage || profile?.profile_image_url || null,\n      bio: form.bio.trim()\n    };\n\n    try {\n      setSaving(true);\n      await API.put('/users/me', payload);\n      setMsg('Profile updated');\n      setProfile((prev) => ({ ...prev, ...payload }));\n      if (profile?.id) {\n        localStorage.setItem(`profileImagePos_${profile.id}`, JSON.stringify(imagePosition));\n      }\n    } catch (err) {\n      console.error(err);\n      setError(err.response?.data?.message || 'Unable to update profile right now.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const ageDisplay = useMemo(() => calculateAge(form.birthdate || profile?.birthdate), [form.birthdate, profile]);\n  const birthYear = useMemo(\n    () => (profile?.birthdate ? new Date(profile.birthdate).getFullYear() : null),\n    [profile?.birthdate]\n  );\n  const displayImage = form.profileImage || profile?.profile_image_url || DEFAULT_PROPERTY_IMAGE;\n\n  const handlePositionChange = (axis, value) => {\n    setImagePosition((prev) => ({ ...prev, [axis]: Number(value) }));\n  };\n\n  if (loading) return <div>Loading...</div>;\n\n  if (error && !profile) {\n    return (\n      <div className=\"alert alert-warning d-flex justify-content-between align-items-center\">\n        <span>{error}</span>\n        <button type=\"button\" className=\"btn btn-primary btn-sm\" onClick={() => navigate('/login')}>\n          Go to login\n        </button>\n      </div>\n    );\n  }\n\n  if (!profile) return null;\n\n  return (\n    <div className=\"profile-page\">\n      <div className=\"profile-hero-card shadow-sm\">\n            <div className=\"profile-hero-image\">\n          <img src={displayImage} alt=\"Profile\" style={{ objectPosition: `${imagePosition.x}% ${imagePosition.y}%` }} />\n          <div className=\"profile-hero-overlay\">\n              <div className=\"d-flex align-items-center gap-2 mb-2\">\n                <span className=\"status-dot\"></span>\n                <span className=\"text-light small\">Online now</span>\n              </div>\n            <h2 className=\"text-light mb-1\">\n              {ageDisplay !== null ? `${profile.name}, ${ageDisplay}` : profile.name}\n            </h2>\n            {birthYear && <p className=\"mb-1 text-light small\">Born {birthYear}</p>}\n            {profile.location && <p className=\"mb-1 text-light\">{profile.location}</p>}\n            {form.bio && <p className=\"mb-2 text-light fw-semibold\">{form.bio}</p>}\n            {form.habits.length > 0 && (\n              <div className=\"pill-row\">\n                {form.habits.slice(0, 6).map((habit) => (\n                  <span key={habit} className=\"pill pill-selected small\">\n                    {habit}\n                  </span>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"card border-0 shadow-sm\">\n        <div className=\"card-body\">\n          <p className=\"eyebrow text-uppercase mb-1\">Improve your matches</p>\n          <h3 className=\"h5\">Update profile</h3>\n          {msg && <div className=\"alert alert-info mt-2\">{msg}</div>}\n          {error && profile && <div className=\"alert alert-warning mt-2\">{error}</div>}\n          <form className=\"mt-3\" onSubmit={handleSubmit}>\n            <div className=\"mb-3\">\n              <label className=\"form-label d-block\">Gender *</label>\n              <div className=\"d-flex gap-3\">\n                <div className=\"form-check\">\n                  <input\n                    className=\"form-check-input\"\n                    type=\"radio\"\n                    name=\"gender\"\n                    id=\"gender-male\"\n                    value=\"male\"\n                    checked={form.gender === 'male'}\n                    onChange={handleChange}\n                    required\n                  />\n                  <label className=\"form-check-label\" htmlFor=\"gender-male\">\n                    Male\n                  </label>\n                </div>\n                <div className=\"form-check\">\n                  <input\n                    className=\"form-check-input\"\n                    type=\"radio\"\n                    name=\"gender\"\n                    id=\"gender-female\"\n                    value=\"female\"\n                    checked={form.gender === 'female'}\n                    onChange={handleChange}\n                    required\n                  />\n                  <label className=\"form-check-label\" htmlFor=\"gender-female\">\n                    Female\n                  </label>\n                </div>\n              </div>\n            </div>\n            <div className=\"mb-3\">\n              <label className=\"form-label\">Location</label>\n              <input name=\"location\" value={form.location} onChange={handleChange} className=\"form-control\" />\n            </div>\n            <div className=\"mb-3\">\n              <div className=\"d-flex justify-content-between align-items-center mb-1\">\n                <label className=\"form-label mb-0\">Interests (select {MIN_HABITS}-{MAX_HABITS}) *</label>\n                <small className=\"text-muted\">{form.habits.length} selected</small>\n              </div>\n              <div className=\"pill-grid selectable\">\n                {HABIT_OPTIONS.map((option) => {\n                  const selected = form.habits.includes(option);\n                  const disabled = !selected && form.habits.length >= MAX_HABITS;\n                  return (\n                    <button\n                      type=\"button\"\n                      key={option}\n                      className={`pill ${selected ? 'pill-selected' : ''}`}\n                      onClick={() => handleHabitToggle(option)}\n                      disabled={disabled}\n                    >\n                      {option}\n                    </button>\n                  );\n                })}\n              </div>\n              <small className=\"text-muted\">\n                Weâ€™ll use these to improve AI roommate compatibility. Pick what genuinely matters to you.\n              </small>\n            </div>\n            <div className=\"mb-3\">\n              <div className=\"d-flex justify-content-between align-items-center mb-1\">\n                <label className=\"form-label mb-0\">My bio *</label>\n                <small className=\"text-muted\">{form.bio.length}/{BIO_LIMIT}</small>\n              </div>\n              <input\n                name=\"bio\"\n                value={form.bio}\n                onChange={(e) => {\n                  if (e.target.value.length <= BIO_LIMIT) handleChange(e);\n                }}\n                className=\"form-control\"\n                placeholder=\"Short sentence about you\"\n                required\n              />\n            </div>\n            <div className=\"mb-3\">\n              <label className=\"form-label\">Profile photo</label>\n              <div className=\"d-flex align-items-center gap-3\">\n                <div className=\"profile-avatar small\">\n                  {displayImage ? (\n                    <img\n                      src={displayImage}\n                      alt=\"Profile\"\n                      style={{ objectPosition: `${imagePosition.x}% ${imagePosition.y}%` }}\n                    />\n                  ) : (\n                    <span>?</span>\n                  )}\n                </div>\n                <div className=\"flex-grow-1\">\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    className=\"form-control\"\n                    onChange={handlePhotoUpload}\n                    disabled={uploading}\n                  />\n                  <small className=\"text-muted\">Upload one clear photo (max 5MB). Save after upload to keep changes.</small>\n                </div>\n              </div>\n            </div>\n            <div className=\"mb-3\">\n              <label className=\"form-label\">Adjust photo focus</label>\n              <div className=\"row g-2\">\n                <div className=\"col-md-6\">\n                  <small className=\"text-muted d-block mb-1\">Horizontal</small>\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"100\"\n                    value={imagePosition.x}\n                    onChange={(e) => handlePositionChange('x', e.target.value)}\n                    className=\"form-range\"\n                  />\n                </div>\n                <div className=\"col-md-6\">\n                  <small className=\"text-muted d-block mb-1\">Vertical</small>\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"100\"\n                    value={imagePosition.y}\n                    onChange={(e) => handlePositionChange('y', e.target.value)}\n                    className=\"form-range\"\n                  />\n                </div>\n              </div>\n            </div>\n            <button className=\"btn btn-primary\" type=\"submit\" disabled={saving}>\n              {saving ? 'Saving...' : 'Save profile'}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}