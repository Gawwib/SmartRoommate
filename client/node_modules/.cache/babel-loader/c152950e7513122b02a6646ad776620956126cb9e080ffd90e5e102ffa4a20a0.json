{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\Project\\\\Smart-roommate-app\\\\client\\\\src\\\\components\\\\PropertyDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\nimport { FaArrowLeft, FaBed, FaCalendarAlt, FaCoins, FaHome, FaImages, FaMapMarkerAlt, FaUser } from 'react-icons/fa';\nimport { MapContainer, Marker, TileLayer } from 'react-leaflet';\nimport API from '../services/api';\nimport { DEFAULT_PROPERTY_IMAGE } from '../constants/propertyMedia';\nimport '../utils/leafletIcons';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst priceFormatter = new Intl.NumberFormat('bs-BA', {\n  style: 'currency',\n  currency: 'BAM',\n  maximumFractionDigits: 0\n});\nconst formatDate = value => {\n  if (!value) return 'Recently listed';\n  try {\n    return new Intl.DateTimeFormat('en', {\n      dateStyle: 'medium'\n    }).format(new Date(value));\n  } catch {\n    return value;\n  }\n};\nexport default function PropertyDetails() {\n  _s();\n  var _location$state, _location$state2;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [property, setProperty] = useState(((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.property) || null);\n  const [loading, setLoading] = useState(!((_location$state2 = location.state) !== null && _location$state2 !== void 0 && _location$state2.property));\n  const [error, setError] = useState('');\n  const [activeImage, setActiveImage] = useState(null);\n  const token = localStorage.getItem('token');\n  const [currentUserId, setCurrentUserId] = useState(null);\n  const [galleryOpen, setGalleryOpen] = useState(false);\n  const [modalIndex, setModalIndex] = useState(0);\n  useEffect(() => {\n    const fetchProperty = async () => {\n      try {\n        setLoading(true);\n        const res = await API.get(`/properties/${id}`);\n        setProperty(res.data);\n        setError('');\n      } catch (err) {\n        var _err$response, _err$response$data;\n        console.error(err);\n        setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Unable to load property details.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProperty();\n  }, [id]);\n  useEffect(() => {\n    const fetchCurrentUser = async () => {\n      if (!token) return;\n      try {\n        var _res$data;\n        const res = await API.get('/users/me');\n        setCurrentUserId(((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.id) || null);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchCurrentUser();\n  }, [token]);\n  useEffect(() => {\n    var _property$gallery_ima;\n    if (!property) return;\n    const heroCandidate = property.main_image_url || ((_property$gallery_ima = property.gallery_images) === null || _property$gallery_ima === void 0 ? void 0 : _property$gallery_ima[0]) || DEFAULT_PROPERTY_IMAGE;\n    setActiveImage(heroCandidate || DEFAULT_PROPERTY_IMAGE);\n  }, [property]);\n  const galleryImages = useMemo(() => {\n    if (!property) return [];\n    const existing = Array.isArray(property.gallery_images) ? property.gallery_images.filter(Boolean) : [];\n    if (existing.length) return existing;\n    if (property.main_image_url) return [property.main_image_url];\n    return [];\n  }, [property]);\n  const handleBack = () => {\n    if (window.history.length > 1) navigate(-1);else navigate('/properties');\n  };\n  const handleGallerySelect = image => setActiveImage(image);\n  const openGalleryModal = image => {\n    if (!galleryImages.length) return;\n    const index = galleryImages.findIndex(img => img === image);\n    setModalIndex(index >= 0 ? index : 0);\n    setGalleryOpen(true);\n  };\n  const handleSendMessage = () => {\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    if (property !== null && property !== void 0 && property.user_id && currentUserId && property.user_id === currentUserId) {\n      return;\n    }\n    navigate(`/messages?recipient=${property.user_id}&property=${property.id}`);\n  };\n  const renderBody = () => {\n    if (loading && !property) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card border-0 shadow-sm p-4 text-center\",\n        children: \"Loading property...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 14\n      }, this);\n    }\n    if (error && !property) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger shadow-sm\",\n        role: \"alert\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this);\n    }\n    if (!property) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-warning shadow-sm\",\n        role: \"alert\",\n        children: \"Property could not be found. It may have been removed by the host.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"property-detail-hero card border-0 shadow-sm mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"property-detail-hero__media\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: activeImage || DEFAULT_PROPERTY_IMAGE,\n            alt: property.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge text-bg-light property-detail-type\",\n            children: property.property_type || 'Listing'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"property-detail-hero__content\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"eyebrow text-muted mb-1\",\n            children: [\"Property #\", property.id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"mb-3\",\n            children: property.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"property-detail-location\",\n            children: [/*#__PURE__*/_jsxDEV(FaMapMarkerAlt, {\n              className: \"me-2 text-primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this), property.location]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"property-detail-price\",\n            children: [/*#__PURE__*/_jsxDEV(FaCoins, {\n              className: \"me-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this), priceFormatter.format(property.price), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-muted\",\n              children: \" / month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"property-detail-card card border-0 shadow-sm mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row g-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-7\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"h4 mb-3\",\n                children: \"About this property\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 17\n              }, this), property.description ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-body-secondary\",\n                children: property.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-body-secondary\",\n                children: \"The host has not provided a description yet.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"detail-meta-grid mt-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(FaBed, {\n                    className: \"text-primary me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mb-0 text-muted\",\n                      children: \"Rooms\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 162,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: property.rooms ? `${property.rooms} available` : 'Flexible layout'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 163,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(FaHome, {\n                    className: \"text-primary me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mb-0 text-muted\",\n                      children: \"Type\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: property.property_type || 'Not specified'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 170,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(FaUser, {\n                    className: \"text-primary me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mb-0 text-muted\",\n                      children: \"Host\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: property.owner_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 177,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n                    className: \"text-primary me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mb-0 text-muted\",\n                      children: \"Listed on\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 183,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: formatDate(property.created_at)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"host-card mt-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"host-avatar\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: property.owner_image_url || DEFAULT_PROPERTY_IMAGE,\n                    alt: property.owner_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"host-meta\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-1 fw-semibold\",\n                    children: [\"Hosted by \", property.owner_name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-muted\",\n                    children: \"Response within a few hours\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 19\n                }, this), property.user_id !== currentUserId && /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-primary btn-sm\",\n                  onClick: handleSendMessage,\n                  children: \"Send message\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-5\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"h4 mb-3\",\n                children: [\"Gallery \", /*#__PURE__*/_jsxDEV(FaImages, {\n                  className: \"ms-2 text-primary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"property-detail-gallery\",\n                children: [galleryImages.map(image => /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: `gallery-thumb ${activeImage === image ? 'is-active' : ''}`,\n                  onClick: () => {\n                    handleGallerySelect(image);\n                    openGalleryModal(image);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: image,\n                    alt: \"Property thumbnail\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 23\n                  }, this)\n                }, image, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 21\n                }, this)), !galleryImages.length && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-muted small\",\n                  children: \"No additional photos were provided for this listing.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), property.latitude && property.longitude && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"property-detail-card card border-0 shadow-sm mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"h4 mb-3\",\n            children: \"Location on map\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"property-map\",\n            children: /*#__PURE__*/_jsxDEV(MapContainer, {\n              center: [Number(property.latitude), Number(property.longitude)],\n              zoom: 13,\n              scrollWheelZoom: false,\n              children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n                attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a>\",\n                url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Marker, {\n                position: [Number(property.latitude), Number(property.longitude)]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"property-detail-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"btn btn-link ps-0 mb-3 text-decoration-none\",\n      onClick: handleBack,\n      children: [/*#__PURE__*/_jsxDEV(FaArrowLeft, {\n        className: \"me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), \"Back to properties\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), renderBody(), galleryOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-modal\",\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-dialog map-dialog gallery-dialog\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"h5 mb-0\",\n            children: \"Photo gallery\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-link\",\n            onClick: () => setGalleryOpen(false),\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"gallery-modal-body\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: galleryImages[modalIndex],\n            alt: \"Selected property\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"gallery-modal-thumbs\",\n          children: galleryImages.map((image, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: `gallery-thumb ${index === modalIndex ? 'is-active' : ''}`,\n            onClick: () => setModalIndex(index),\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: image,\n              alt: \"Property thumbnail\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 19\n            }, this)\n          }, image, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }, this);\n}\n_s(PropertyDetails, \"1PvXQxqrzbExY8yYRkqoSGskqDo=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = PropertyDetails;\nvar _c;\n$RefreshReg$(_c, \"PropertyDetails\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useLocation","useNavigate","useParams","FaArrowLeft","FaBed","FaCalendarAlt","FaCoins","FaHome","FaImages","FaMapMarkerAlt","FaUser","MapContainer","Marker","TileLayer","API","DEFAULT_PROPERTY_IMAGE","jsxDEV","_jsxDEV","Fragment","_Fragment","priceFormatter","Intl","NumberFormat","style","currency","maximumFractionDigits","formatDate","value","DateTimeFormat","dateStyle","format","Date","PropertyDetails","_s","_location$state","_location$state2","id","navigate","location","property","setProperty","state","loading","setLoading","error","setError","activeImage","setActiveImage","token","localStorage","getItem","currentUserId","setCurrentUserId","galleryOpen","setGalleryOpen","modalIndex","setModalIndex","fetchProperty","res","get","data","err","_err$response","_err$response$data","console","response","message","fetchCurrentUser","_res$data","_property$gallery_ima","heroCandidate","main_image_url","gallery_images","galleryImages","existing","Array","isArray","filter","Boolean","length","handleBack","window","history","handleGallerySelect","image","openGalleryModal","index","findIndex","img","handleSendMessage","user_id","renderBody","className","children","fileName","_jsxFileName","lineNumber","columnNumber","role","src","alt","title","property_type","price","description","rooms","owner_name","created_at","owner_image_url","type","onClick","map","latitude","longitude","center","Number","zoom","scrollWheelZoom","attribution","url","position","_c","$RefreshReg$"],"sources":["C:/Users/User/Documents/Project/Smart-roommate-app/client/src/components/PropertyDetails.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\nimport { FaArrowLeft, FaBed, FaCalendarAlt, FaCoins, FaHome, FaImages, FaMapMarkerAlt, FaUser } from 'react-icons/fa';\nimport { MapContainer, Marker, TileLayer } from 'react-leaflet';\nimport API from '../services/api';\nimport { DEFAULT_PROPERTY_IMAGE } from '../constants/propertyMedia';\nimport '../utils/leafletIcons';\n\nconst priceFormatter = new Intl.NumberFormat('bs-BA', {\n  style: 'currency',\n  currency: 'BAM',\n  maximumFractionDigits: 0\n});\n\nconst formatDate = (value) => {\n  if (!value) return 'Recently listed';\n  try {\n    return new Intl.DateTimeFormat('en', { dateStyle: 'medium' }).format(new Date(value));\n  } catch {\n    return value;\n  }\n};\n\nexport default function PropertyDetails() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [property, setProperty] = useState(location.state?.property || null);\n  const [loading, setLoading] = useState(!location.state?.property);\n  const [error, setError] = useState('');\n  const [activeImage, setActiveImage] = useState(null);\n  const token = localStorage.getItem('token');\n  const [currentUserId, setCurrentUserId] = useState(null);\n  const [galleryOpen, setGalleryOpen] = useState(false);\n  const [modalIndex, setModalIndex] = useState(0);\n\n  useEffect(() => {\n    const fetchProperty = async () => {\n      try {\n        setLoading(true);\n        const res = await API.get(`/properties/${id}`);\n        setProperty(res.data);\n        setError('');\n      } catch (err) {\n        console.error(err);\n        setError(err.response?.data?.message || 'Unable to load property details.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProperty();\n  }, [id]);\n\n  useEffect(() => {\n    const fetchCurrentUser = async () => {\n      if (!token) return;\n      try {\n        const res = await API.get('/users/me');\n        setCurrentUserId(res.data?.id || null);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchCurrentUser();\n  }, [token]);\n\n  useEffect(() => {\n    if (!property) return;\n    const heroCandidate = property.main_image_url || property.gallery_images?.[0] || DEFAULT_PROPERTY_IMAGE;\n    setActiveImage(heroCandidate || DEFAULT_PROPERTY_IMAGE);\n  }, [property]);\n\n  const galleryImages = useMemo(() => {\n    if (!property) return [];\n    const existing = Array.isArray(property.gallery_images) ? property.gallery_images.filter(Boolean) : [];\n    if (existing.length) return existing;\n    if (property.main_image_url) return [property.main_image_url];\n    return [];\n  }, [property]);\n\n  const handleBack = () => {\n    if (window.history.length > 1) navigate(-1);\n    else navigate('/properties');\n  };\n\n  const handleGallerySelect = (image) => setActiveImage(image);\n  const openGalleryModal = (image) => {\n    if (!galleryImages.length) return;\n    const index = galleryImages.findIndex((img) => img === image);\n    setModalIndex(index >= 0 ? index : 0);\n    setGalleryOpen(true);\n  };\n  const handleSendMessage = () => {\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    if (property?.user_id && currentUserId && property.user_id === currentUserId) {\n      return;\n    }\n    navigate(`/messages?recipient=${property.user_id}&property=${property.id}`);\n  };\n\n  const renderBody = () => {\n    if (loading && !property) {\n      return <div className=\"card border-0 shadow-sm p-4 text-center\">Loading property...</div>;\n    }\n\n    if (error && !property) {\n      return (\n        <div className=\"alert alert-danger shadow-sm\" role=\"alert\">\n          {error}\n        </div>\n      );\n    }\n\n    if (!property) {\n      return (\n        <div className=\"alert alert-warning shadow-sm\" role=\"alert\">\n          Property could not be found. It may have been removed by the host.\n        </div>\n      );\n    }\n\n    return (\n      <>\n        <div className=\"property-detail-hero card border-0 shadow-sm mb-4\">\n          <div className=\"property-detail-hero__media\">\n            <img src={activeImage || DEFAULT_PROPERTY_IMAGE} alt={property.title} />\n            <span className=\"badge text-bg-light property-detail-type\">{property.property_type || 'Listing'}</span>\n          </div>\n          <div className=\"property-detail-hero__content\">\n            <p className=\"eyebrow text-muted mb-1\">Property #{property.id}</p>\n            <h1 className=\"mb-3\">{property.title}</h1>\n            <p className=\"property-detail-location\">\n              <FaMapMarkerAlt className=\"me-2 text-primary\" />\n              {property.location}\n            </p>\n            <div className=\"property-detail-price\">\n              <FaCoins className=\"me-1\" />\n              {priceFormatter.format(property.price)}\n              <span className=\"text-muted\"> / month</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"property-detail-card card border-0 shadow-sm mb-4\">\n          <div className=\"card-body\">\n            <div className=\"row g-4\">\n              <div className=\"col-lg-7\">\n                <h2 className=\"h4 mb-3\">About this property</h2>\n                {property.description ? (\n                  <p className=\"text-body-secondary\">{property.description}</p>\n                ) : (\n                  <p className=\"text-body-secondary\">The host has not provided a description yet.</p>\n                )}\n                <div className=\"detail-meta-grid mt-4\">\n                  <div>\n                    <FaBed className=\"text-primary me-2\" />\n                    <div>\n                      <p className=\"mb-0 text-muted\">Rooms</p>\n                      <strong>{property.rooms ? `${property.rooms} available` : 'Flexible layout'}</strong>\n                    </div>\n                  </div>\n                  <div>\n                    <FaHome className=\"text-primary me-2\" />\n                    <div>\n                      <p className=\"mb-0 text-muted\">Type</p>\n                      <strong>{property.property_type || 'Not specified'}</strong>\n                    </div>\n                  </div>\n                  <div>\n                    <FaUser className=\"text-primary me-2\" />\n                    <div>\n                      <p className=\"mb-0 text-muted\">Host</p>\n                      <strong>{property.owner_name}</strong>\n                    </div>\n                  </div>\n                  <div>\n                    <FaCalendarAlt className=\"text-primary me-2\" />\n                    <div>\n                      <p className=\"mb-0 text-muted\">Listed on</p>\n                      <strong>{formatDate(property.created_at)}</strong>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"host-card mt-4\">\n                  <div className=\"host-avatar\">\n                    <img src={property.owner_image_url || DEFAULT_PROPERTY_IMAGE} alt={property.owner_name} />\n                  </div>\n                  <div className=\"host-meta\">\n                    <p className=\"mb-1 fw-semibold\">Hosted by {property.owner_name}</p>\n                    <small className=\"text-muted\">Response within a few hours</small>\n                  </div>\n                  {property.user_id !== currentUserId && (\n                    <button type=\"button\" className=\"btn btn-primary btn-sm\" onClick={handleSendMessage}>\n                      Send message\n                    </button>\n                  )}\n                </div>\n              </div>\n              <div className=\"col-lg-5\">\n                <h2 className=\"h4 mb-3\">\n                  Gallery <FaImages className=\"ms-2 text-primary\" />\n                </h2>\n                <div className=\"property-detail-gallery\">\n                  {galleryImages.map((image) => (\n                    <button\n                      type=\"button\"\n                      key={image}\n                      className={`gallery-thumb ${activeImage === image ? 'is-active' : ''}`}\n                      onClick={() => {\n                        handleGallerySelect(image);\n                        openGalleryModal(image);\n                      }}\n                    >\n                      <img src={image} alt=\"Property thumbnail\" />\n                    </button>\n                  ))}\n                  {!galleryImages.length && (\n                    <div className=\"text-muted small\">No additional photos were provided for this listing.</div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        {property.latitude && property.longitude && (\n          <div className=\"property-detail-card card border-0 shadow-sm mb-4\">\n            <div className=\"card-body\">\n              <h2 className=\"h4 mb-3\">Location on map</h2>\n              <div className=\"property-map\">\n                <MapContainer\n                  center={[Number(property.latitude), Number(property.longitude)]}\n                  zoom={13}\n                  scrollWheelZoom={false}\n                >\n                  <TileLayer\n                    attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                  />\n                  <Marker position={[Number(property.latitude), Number(property.longitude)]} />\n                </MapContainer>\n              </div>\n            </div>\n          </div>\n        )}\n      </>\n    );\n  };\n\n  return (\n    <div className=\"property-detail-page\">\n      <button type=\"button\" className=\"btn btn-link ps-0 mb-3 text-decoration-none\" onClick={handleBack}>\n        <FaArrowLeft className=\"me-2\" />\n        Back to properties\n      </button>\n      {renderBody()}\n      {galleryOpen && (\n        <div className=\"filter-modal\" role=\"dialog\" aria-modal=\"true\">\n          <div className=\"filter-dialog map-dialog gallery-dialog\">\n            <div className=\"filter-header\">\n              <h2 className=\"h5 mb-0\">Photo gallery</h2>\n              <button type=\"button\" className=\"btn btn-link\" onClick={() => setGalleryOpen(false)}>\n                Close\n              </button>\n            </div>\n            <div className=\"gallery-modal-body\">\n              <img src={galleryImages[modalIndex]} alt=\"Selected property\" />\n            </div>\n            <div className=\"gallery-modal-thumbs\">\n              {galleryImages.map((image, index) => (\n                <button\n                  type=\"button\"\n                  key={image}\n                  className={`gallery-thumb ${index === modalIndex ? 'is-active' : ''}`}\n                  onClick={() => setModalIndex(index)}\n                >\n                  <img src={image} alt=\"Property thumbnail\" />\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,SAASC,WAAW,EAAEC,WAAW,EAAEC,SAAS,QAAQ,kBAAkB;AACtE,SAASC,WAAW,EAAEC,KAAK,EAAEC,aAAa,EAAEC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,cAAc,EAAEC,MAAM,QAAQ,gBAAgB;AACrH,SAASC,YAAY,EAAEC,MAAM,EAAEC,SAAS,QAAQ,eAAe;AAC/D,OAAOC,GAAG,MAAM,iBAAiB;AACjC,SAASC,sBAAsB,QAAQ,4BAA4B;AACnE,OAAO,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE/B,MAAMC,cAAc,GAAG,IAAIC,IAAI,CAACC,YAAY,CAAC,OAAO,EAAE;EACpDC,KAAK,EAAE,UAAU;EACjBC,QAAQ,EAAE,KAAK;EACfC,qBAAqB,EAAE;AACzB,CAAC,CAAC;AAEF,MAAMC,UAAU,GAAIC,KAAK,IAAK;EAC5B,IAAI,CAACA,KAAK,EAAE,OAAO,iBAAiB;EACpC,IAAI;IACF,OAAO,IAAIN,IAAI,CAACO,cAAc,CAAC,IAAI,EAAE;MAAEC,SAAS,EAAE;IAAS,CAAC,CAAC,CAACC,MAAM,CAAC,IAAIC,IAAI,CAACJ,KAAK,CAAC,CAAC;EACvF,CAAC,CAAC,MAAM;IACN,OAAOA,KAAK;EACd;AACF,CAAC;AAED,eAAe,SAASK,eAAeA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,eAAA,EAAAC,gBAAA;EACxC,MAAM;IAAEC;EAAG,CAAC,GAAGlC,SAAS,CAAC,CAAC;EAC1B,MAAMmC,QAAQ,GAAGpC,WAAW,CAAC,CAAC;EAC9B,MAAMqC,QAAQ,GAAGtC,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACuC,QAAQ,EAAEC,WAAW,CAAC,GAAGzC,QAAQ,CAAC,EAAAmC,eAAA,GAAAI,QAAQ,CAACG,KAAK,cAAAP,eAAA,uBAAdA,eAAA,CAAgBK,QAAQ,KAAI,IAAI,CAAC;EAC1E,MAAM,CAACG,OAAO,EAAEC,UAAU,CAAC,GAAG5C,QAAQ,CAAC,GAAAoC,gBAAA,GAACG,QAAQ,CAACG,KAAK,cAAAN,gBAAA,eAAdA,gBAAA,CAAgBI,QAAQ,EAAC;EACjE,MAAM,CAACK,KAAK,EAAEC,QAAQ,CAAC,GAAG9C,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAAC+C,WAAW,EAAEC,cAAc,CAAC,GAAGhD,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAMiD,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGrD,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACsD,WAAW,EAAEC,cAAc,CAAC,GAAGvD,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACwD,UAAU,EAAEC,aAAa,CAAC,GAAGzD,QAAQ,CAAC,CAAC,CAAC;EAE/CF,SAAS,CAAC,MAAM;IACd,MAAM4D,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACFd,UAAU,CAAC,IAAI,CAAC;QAChB,MAAMe,GAAG,GAAG,MAAM5C,GAAG,CAAC6C,GAAG,CAAC,eAAevB,EAAE,EAAE,CAAC;QAC9CI,WAAW,CAACkB,GAAG,CAACE,IAAI,CAAC;QACrBf,QAAQ,CAAC,EAAE,CAAC;MACd,CAAC,CAAC,OAAOgB,GAAG,EAAE;QAAA,IAAAC,aAAA,EAAAC,kBAAA;QACZC,OAAO,CAACpB,KAAK,CAACiB,GAAG,CAAC;QAClBhB,QAAQ,CAAC,EAAAiB,aAAA,GAAAD,GAAG,CAACI,QAAQ,cAAAH,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcF,IAAI,cAAAG,kBAAA,uBAAlBA,kBAAA,CAAoBG,OAAO,KAAI,kCAAkC,CAAC;MAC7E,CAAC,SAAS;QACRvB,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDc,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACrB,EAAE,CAAC,CAAC;EAERvC,SAAS,CAAC,MAAM;IACd,MAAMsE,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAI,CAACnB,KAAK,EAAE;MACZ,IAAI;QAAA,IAAAoB,SAAA;QACF,MAAMV,GAAG,GAAG,MAAM5C,GAAG,CAAC6C,GAAG,CAAC,WAAW,CAAC;QACtCP,gBAAgB,CAAC,EAAAgB,SAAA,GAAAV,GAAG,CAACE,IAAI,cAAAQ,SAAA,uBAARA,SAAA,CAAUhC,EAAE,KAAI,IAAI,CAAC;MACxC,CAAC,CAAC,OAAOyB,GAAG,EAAE;QACZG,OAAO,CAACpB,KAAK,CAACiB,GAAG,CAAC;MACpB;IACF,CAAC;IACDM,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACnB,KAAK,CAAC,CAAC;EAEXnD,SAAS,CAAC,MAAM;IAAA,IAAAwE,qBAAA;IACd,IAAI,CAAC9B,QAAQ,EAAE;IACf,MAAM+B,aAAa,GAAG/B,QAAQ,CAACgC,cAAc,MAAAF,qBAAA,GAAI9B,QAAQ,CAACiC,cAAc,cAAAH,qBAAA,uBAAvBA,qBAAA,CAA0B,CAAC,CAAC,KAAItD,sBAAsB;IACvGgC,cAAc,CAACuB,aAAa,IAAIvD,sBAAsB,CAAC;EACzD,CAAC,EAAE,CAACwB,QAAQ,CAAC,CAAC;EAEd,MAAMkC,aAAa,GAAG3E,OAAO,CAAC,MAAM;IAClC,IAAI,CAACyC,QAAQ,EAAE,OAAO,EAAE;IACxB,MAAMmC,QAAQ,GAAGC,KAAK,CAACC,OAAO,CAACrC,QAAQ,CAACiC,cAAc,CAAC,GAAGjC,QAAQ,CAACiC,cAAc,CAACK,MAAM,CAACC,OAAO,CAAC,GAAG,EAAE;IACtG,IAAIJ,QAAQ,CAACK,MAAM,EAAE,OAAOL,QAAQ;IACpC,IAAInC,QAAQ,CAACgC,cAAc,EAAE,OAAO,CAAChC,QAAQ,CAACgC,cAAc,CAAC;IAC7D,OAAO,EAAE;EACX,CAAC,EAAE,CAAChC,QAAQ,CAAC,CAAC;EAEd,MAAMyC,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAIC,MAAM,CAACC,OAAO,CAACH,MAAM,GAAG,CAAC,EAAE1C,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,KACvCA,QAAQ,CAAC,aAAa,CAAC;EAC9B,CAAC;EAED,MAAM8C,mBAAmB,GAAIC,KAAK,IAAKrC,cAAc,CAACqC,KAAK,CAAC;EAC5D,MAAMC,gBAAgB,GAAID,KAAK,IAAK;IAClC,IAAI,CAACX,aAAa,CAACM,MAAM,EAAE;IAC3B,MAAMO,KAAK,GAAGb,aAAa,CAACc,SAAS,CAAEC,GAAG,IAAKA,GAAG,KAAKJ,KAAK,CAAC;IAC7D5B,aAAa,CAAC8B,KAAK,IAAI,CAAC,GAAGA,KAAK,GAAG,CAAC,CAAC;IACrChC,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EACD,MAAMmC,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,IAAI,CAACzC,KAAK,EAAE;MACVX,QAAQ,CAAC,QAAQ,CAAC;MAClB;IACF;IACA,IAAIE,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEmD,OAAO,IAAIvC,aAAa,IAAIZ,QAAQ,CAACmD,OAAO,KAAKvC,aAAa,EAAE;MAC5E;IACF;IACAd,QAAQ,CAAC,uBAAuBE,QAAQ,CAACmD,OAAO,aAAanD,QAAQ,CAACH,EAAE,EAAE,CAAC;EAC7E,CAAC;EAED,MAAMuD,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAIjD,OAAO,IAAI,CAACH,QAAQ,EAAE;MACxB,oBAAOtB,OAAA;QAAK2E,SAAS,EAAC,yCAAyC;QAAAC,QAAA,EAAC;MAAmB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAC3F;IAEA,IAAIrD,KAAK,IAAI,CAACL,QAAQ,EAAE;MACtB,oBACEtB,OAAA;QAAK2E,SAAS,EAAC,8BAA8B;QAACM,IAAI,EAAC,OAAO;QAAAL,QAAA,EACvDjD;MAAK;QAAAkD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAEV;IAEA,IAAI,CAAC1D,QAAQ,EAAE;MACb,oBACEtB,OAAA;QAAK2E,SAAS,EAAC,+BAA+B;QAACM,IAAI,EAAC,OAAO;QAAAL,QAAA,EAAC;MAE5D;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAEV;IAEA,oBACEhF,OAAA,CAAAE,SAAA;MAAA0E,QAAA,gBACE5E,OAAA;QAAK2E,SAAS,EAAC,mDAAmD;QAAAC,QAAA,gBAChE5E,OAAA;UAAK2E,SAAS,EAAC,6BAA6B;UAAAC,QAAA,gBAC1C5E,OAAA;YAAKkF,GAAG,EAAErD,WAAW,IAAI/B,sBAAuB;YAACqF,GAAG,EAAE7D,QAAQ,CAAC8D;UAAM;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACxEhF,OAAA;YAAM2E,SAAS,EAAC,0CAA0C;YAAAC,QAAA,EAAEtD,QAAQ,CAAC+D,aAAa,IAAI;UAAS;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpG,CAAC,eACNhF,OAAA;UAAK2E,SAAS,EAAC,+BAA+B;UAAAC,QAAA,gBAC5C5E,OAAA;YAAG2E,SAAS,EAAC,yBAAyB;YAAAC,QAAA,GAAC,YAAU,EAACtD,QAAQ,CAACH,EAAE;UAAA;YAAA0D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAClEhF,OAAA;YAAI2E,SAAS,EAAC,MAAM;YAAAC,QAAA,EAAEtD,QAAQ,CAAC8D;UAAK;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAC1ChF,OAAA;YAAG2E,SAAS,EAAC,0BAA0B;YAAAC,QAAA,gBACrC5E,OAAA,CAACR,cAAc;cAACmF,SAAS,EAAC;YAAmB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,EAC/C1D,QAAQ,CAACD,QAAQ;UAAA;YAAAwD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjB,CAAC,eACJhF,OAAA;YAAK2E,SAAS,EAAC,uBAAuB;YAAAC,QAAA,gBACpC5E,OAAA,CAACX,OAAO;cAACsF,SAAS,EAAC;YAAM;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,EAC3B7E,cAAc,CAACU,MAAM,CAACS,QAAQ,CAACgE,KAAK,CAAC,eACtCtF,OAAA;cAAM2E,SAAS,EAAC,YAAY;cAAAC,QAAA,EAAC;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAENhF,OAAA;QAAK2E,SAAS,EAAC,mDAAmD;QAAAC,QAAA,eAChE5E,OAAA;UAAK2E,SAAS,EAAC,WAAW;UAAAC,QAAA,eACxB5E,OAAA;YAAK2E,SAAS,EAAC,SAAS;YAAAC,QAAA,gBACtB5E,OAAA;cAAK2E,SAAS,EAAC,UAAU;cAAAC,QAAA,gBACvB5E,OAAA;gBAAI2E,SAAS,EAAC,SAAS;gBAAAC,QAAA,EAAC;cAAmB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,EAC/C1D,QAAQ,CAACiE,WAAW,gBACnBvF,OAAA;gBAAG2E,SAAS,EAAC,qBAAqB;gBAAAC,QAAA,EAAEtD,QAAQ,CAACiE;cAAW;gBAAAV,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,gBAE7DhF,OAAA;gBAAG2E,SAAS,EAAC,qBAAqB;gBAAAC,QAAA,EAAC;cAA4C;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CACnF,eACDhF,OAAA;gBAAK2E,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,gBACpC5E,OAAA;kBAAA4E,QAAA,gBACE5E,OAAA,CAACb,KAAK;oBAACwF,SAAS,EAAC;kBAAmB;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,eACvChF,OAAA;oBAAA4E,QAAA,gBACE5E,OAAA;sBAAG2E,SAAS,EAAC,iBAAiB;sBAAAC,QAAA,EAAC;oBAAK;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAG,CAAC,eACxChF,OAAA;sBAAA4E,QAAA,EAAStD,QAAQ,CAACkE,KAAK,GAAG,GAAGlE,QAAQ,CAACkE,KAAK,YAAY,GAAG;oBAAiB;sBAAAX,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAS,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAClF,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACNhF,OAAA;kBAAA4E,QAAA,gBACE5E,OAAA,CAACV,MAAM;oBAACqF,SAAS,EAAC;kBAAmB;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,eACxChF,OAAA;oBAAA4E,QAAA,gBACE5E,OAAA;sBAAG2E,SAAS,EAAC,iBAAiB;sBAAAC,QAAA,EAAC;oBAAI;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAG,CAAC,eACvChF,OAAA;sBAAA4E,QAAA,EAAStD,QAAQ,CAAC+D,aAAa,IAAI;oBAAe;sBAAAR,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAS,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACzD,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACNhF,OAAA;kBAAA4E,QAAA,gBACE5E,OAAA,CAACP,MAAM;oBAACkF,SAAS,EAAC;kBAAmB;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,eACxChF,OAAA;oBAAA4E,QAAA,gBACE5E,OAAA;sBAAG2E,SAAS,EAAC,iBAAiB;sBAAAC,QAAA,EAAC;oBAAI;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAG,CAAC,eACvChF,OAAA;sBAAA4E,QAAA,EAAStD,QAAQ,CAACmE;oBAAU;sBAAAZ,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAS,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACNhF,OAAA;kBAAA4E,QAAA,gBACE5E,OAAA,CAACZ,aAAa;oBAACuF,SAAS,EAAC;kBAAmB;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,eAC/ChF,OAAA;oBAAA4E,QAAA,gBACE5E,OAAA;sBAAG2E,SAAS,EAAC,iBAAiB;sBAAAC,QAAA,EAAC;oBAAS;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAG,CAAC,eAC5ChF,OAAA;sBAAA4E,QAAA,EAASnE,UAAU,CAACa,QAAQ,CAACoE,UAAU;oBAAC;sBAAAb,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAS,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC/C,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eACNhF,OAAA;gBAAK2E,SAAS,EAAC,gBAAgB;gBAAAC,QAAA,gBAC7B5E,OAAA;kBAAK2E,SAAS,EAAC,aAAa;kBAAAC,QAAA,eAC1B5E,OAAA;oBAAKkF,GAAG,EAAE5D,QAAQ,CAACqE,eAAe,IAAI7F,sBAAuB;oBAACqF,GAAG,EAAE7D,QAAQ,CAACmE;kBAAW;oBAAAZ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvF,CAAC,eACNhF,OAAA;kBAAK2E,SAAS,EAAC,WAAW;kBAAAC,QAAA,gBACxB5E,OAAA;oBAAG2E,SAAS,EAAC,kBAAkB;oBAAAC,QAAA,GAAC,YAAU,EAACtD,QAAQ,CAACmE,UAAU;kBAAA;oBAAAZ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACnEhF,OAAA;oBAAO2E,SAAS,EAAC,YAAY;oBAAAC,QAAA,EAAC;kBAA2B;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC9D,CAAC,EACL1D,QAAQ,CAACmD,OAAO,KAAKvC,aAAa,iBACjClC,OAAA;kBAAQ4F,IAAI,EAAC,QAAQ;kBAACjB,SAAS,EAAC,wBAAwB;kBAACkB,OAAO,EAAErB,iBAAkB;kBAAAI,QAAA,EAAC;gBAErF;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CACT;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eACNhF,OAAA;cAAK2E,SAAS,EAAC,UAAU;cAAAC,QAAA,gBACvB5E,OAAA;gBAAI2E,SAAS,EAAC,SAAS;gBAAAC,QAAA,GAAC,UACd,eAAA5E,OAAA,CAACT,QAAQ;kBAACoF,SAAS,EAAC;gBAAmB;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChD,CAAC,eACLhF,OAAA;gBAAK2E,SAAS,EAAC,yBAAyB;gBAAAC,QAAA,GACrCpB,aAAa,CAACsC,GAAG,CAAE3B,KAAK,iBACvBnE,OAAA;kBACE4F,IAAI,EAAC,QAAQ;kBAEbjB,SAAS,EAAE,iBAAiB9C,WAAW,KAAKsC,KAAK,GAAG,WAAW,GAAG,EAAE,EAAG;kBACvE0B,OAAO,EAAEA,CAAA,KAAM;oBACb3B,mBAAmB,CAACC,KAAK,CAAC;oBAC1BC,gBAAgB,CAACD,KAAK,CAAC;kBACzB,CAAE;kBAAAS,QAAA,eAEF5E,OAAA;oBAAKkF,GAAG,EAAEf,KAAM;oBAACgB,GAAG,EAAC;kBAAoB;oBAAAN,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC,GAPvCb,KAAK;kBAAAU,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAQJ,CACT,CAAC,EACD,CAACxB,aAAa,CAACM,MAAM,iBACpB9D,OAAA;kBAAK2E,SAAS,EAAC,kBAAkB;kBAAAC,QAAA,EAAC;gBAAoD;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAC5F;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EACL1D,QAAQ,CAACyE,QAAQ,IAAIzE,QAAQ,CAAC0E,SAAS,iBACtChG,OAAA;QAAK2E,SAAS,EAAC,mDAAmD;QAAAC,QAAA,eAChE5E,OAAA;UAAK2E,SAAS,EAAC,WAAW;UAAAC,QAAA,gBACxB5E,OAAA;YAAI2E,SAAS,EAAC,SAAS;YAAAC,QAAA,EAAC;UAAe;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC5ChF,OAAA;YAAK2E,SAAS,EAAC,cAAc;YAAAC,QAAA,eAC3B5E,OAAA,CAACN,YAAY;cACXuG,MAAM,EAAE,CAACC,MAAM,CAAC5E,QAAQ,CAACyE,QAAQ,CAAC,EAAEG,MAAM,CAAC5E,QAAQ,CAAC0E,SAAS,CAAC,CAAE;cAChEG,IAAI,EAAE,EAAG;cACTC,eAAe,EAAE,KAAM;cAAAxB,QAAA,gBAEvB5E,OAAA,CAACJ,SAAS;gBACRyG,WAAW,EAAC,4EAA4E;gBACxFC,GAAG,EAAC;cAAoD;gBAAAzB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzD,CAAC,eACFhF,OAAA,CAACL,MAAM;gBAAC4G,QAAQ,EAAE,CAACL,MAAM,CAAC5E,QAAQ,CAACyE,QAAQ,CAAC,EAAEG,MAAM,CAAC5E,QAAQ,CAAC0E,SAAS,CAAC;cAAE;gBAAAnB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACZ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA,eACD,CAAC;EAEP,CAAC;EAED,oBACEhF,OAAA;IAAK2E,SAAS,EAAC,sBAAsB;IAAAC,QAAA,gBACnC5E,OAAA;MAAQ4F,IAAI,EAAC,QAAQ;MAACjB,SAAS,EAAC,6CAA6C;MAACkB,OAAO,EAAE9B,UAAW;MAAAa,QAAA,gBAChG5E,OAAA,CAACd,WAAW;QAACyF,SAAS,EAAC;MAAM;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,sBAElC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EACRN,UAAU,CAAC,CAAC,EACZtC,WAAW,iBACVpC,OAAA;MAAK2E,SAAS,EAAC,cAAc;MAACM,IAAI,EAAC,QAAQ;MAAC,cAAW,MAAM;MAAAL,QAAA,eAC3D5E,OAAA;QAAK2E,SAAS,EAAC,yCAAyC;QAAAC,QAAA,gBACtD5E,OAAA;UAAK2E,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC5B5E,OAAA;YAAI2E,SAAS,EAAC,SAAS;YAAAC,QAAA,EAAC;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC1ChF,OAAA;YAAQ4F,IAAI,EAAC,QAAQ;YAACjB,SAAS,EAAC,cAAc;YAACkB,OAAO,EAAEA,CAAA,KAAMxD,cAAc,CAAC,KAAK,CAAE;YAAAuC,QAAA,EAAC;UAErF;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eACNhF,OAAA;UAAK2E,SAAS,EAAC,oBAAoB;UAAAC,QAAA,eACjC5E,OAAA;YAAKkF,GAAG,EAAE1B,aAAa,CAAClB,UAAU,CAAE;YAAC6C,GAAG,EAAC;UAAmB;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5D,CAAC,eACNhF,OAAA;UAAK2E,SAAS,EAAC,sBAAsB;UAAAC,QAAA,EAClCpB,aAAa,CAACsC,GAAG,CAAC,CAAC3B,KAAK,EAAEE,KAAK,kBAC9BrE,OAAA;YACE4F,IAAI,EAAC,QAAQ;YAEbjB,SAAS,EAAE,iBAAiBN,KAAK,KAAK/B,UAAU,GAAG,WAAW,GAAG,EAAE,EAAG;YACtEuD,OAAO,EAAEA,CAAA,KAAMtD,aAAa,CAAC8B,KAAK,CAAE;YAAAO,QAAA,eAEpC5E,OAAA;cAAKkF,GAAG,EAAEf,KAAM;cAACgB,GAAG,EAAC;YAAoB;cAAAN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC,GAJvCb,KAAK;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAKJ,CACT;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAChE,EAAA,CAzQuBD,eAAe;EAAA,QACtB9B,SAAS,EACPD,WAAW,EACXD,WAAW;AAAA;AAAAyH,EAAA,GAHNzF,eAAe;AAAA,IAAAyF,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}